<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Topic 8 Data Processing with Tidyverse | STA553 E-Pack: Data Visualization</title>
  <meta name="description" content="The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Topic 8 Data Processing with Tidyverse | STA553 E-Pack: Data Visualization" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/STA553EB" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Topic 8 Data Processing with Tidyverse | STA553 E-Pack: Data Visualization" />
  
  <meta name="twitter:description" content="The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Cheng Peng" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ethics-in-data-visualization.html"/>
<link rel="next" href="introduction-to-ggplot.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<center><li><a href="./"><font color = "darkred"><b>STA 553 E-Pack: Data Visualization</b></font></a><br><font color = "navy">Cheng Peng</font></li></center>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#data-or-information-visualization"><i class="fa fa-check"></i><b>1.1</b> Data or Information Visualization?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#aesthetic-considerations"><i class="fa fa-check"></i><b>1.2</b> Aesthetic Considerations</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#topic-coverage"><i class="fa fa-check"></i><b>1.3</b> Topic Coverage</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html"><i class="fa fa-check"></i><b>2</b> Getting Started With RMarkdown</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#what-is-rmd"><i class="fa fa-check"></i><b>2.1</b> What is RMD</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#create-an-rmarkdown-file"><i class="fa fa-check"></i><b>2.1.1</b> Create an RMarkdown file</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#the-yaml-header"><i class="fa fa-check"></i><b>2.1.2</b> The YAML Header</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#markdown-syntax"><i class="fa fa-check"></i><b>2.1.3</b> Markdown Syntax</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#code-chunks"><i class="fa fa-check"></i><b>2.2</b> Code Chunks</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#code-chunk-options"><i class="fa fa-check"></i><b>2.2.1</b> Code Chunk Options</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#inserting-graphics"><i class="fa fa-check"></i><b>2.3</b> Inserting Graphics</a></li>
<li class="chapter" data-level="2.4" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#inserting-tables"><i class="fa fa-check"></i><b>2.4</b> Inserting Tables</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#creating-pdf"><i class="fa fa-check"></i><b>2.5</b> Creating PDF</a></li>
<li class="chapter" data-level="2.6" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#miscellaneous"><i class="fa fa-check"></i><b>2.6</b> Miscellaneous</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#markdown-presentations"><i class="fa fa-check"></i><b>2.6.1</b> Markdown Presentations</a></li>
<li class="chapter" data-level="2.6.2" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#shiny-apps-and-rmarkdown"><i class="fa fa-check"></i><b>2.6.2</b> Shiny Apps and RMarkdown</a></li>
<li class="chapter" data-level="2.6.3" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#working-directory"><i class="fa fa-check"></i><b>2.6.3</b> Working Directory</a></li>
<li class="chapter" data-level="2.6.4" data-path="getting-started-with-rmarkdown.html"><a href="getting-started-with-rmarkdown.html#css-style"><i class="fa fa-check"></i><b>2.6.4</b> CSS Style</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html"><i class="fa fa-check"></i><b>3</b> Open-Source Tools for Data Viz</a>
<ul>
<li class="chapter" data-level="3.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#dataviz"><i class="fa fa-check"></i><b>3.1</b> DataViz</a></li>
<li class="chapter" data-level="3.2" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#r-rstudio"><i class="fa fa-check"></i><b>3.2</b> R &amp; RStudio</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#what-is-r"><i class="fa fa-check"></i><b>3.2.1</b> What is R?</a></li>
<li class="chapter" data-level="3.2.2" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#rstudio"><i class="fa fa-check"></i><b>3.2.2</b> RStudio</a></li>
<li class="chapter" data-level="3.2.3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#the-relationship-between-r-and-rstudio"><i class="fa fa-check"></i><b>3.2.3</b> The Relationship between R and RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#tableau-public"><i class="fa fa-check"></i><b>3.3</b> Tableau Public</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#about-tableau"><i class="fa fa-check"></i><b>3.3.1</b> About Tableau</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#shiny-server"><i class="fa fa-check"></i><b>3.4</b> Shiny Server</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#what-is-shiny.io"><i class="fa fa-check"></i><b>3.4.1</b> What is shiny.io?</a></li>
<li class="chapter" data-level="3.4.2" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#register-an-account-with-shiny.io"><i class="fa fa-check"></i><b>3.4.2</b> Register An Account with shiny.io</a></li>
<li class="chapter" data-level="3.4.3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#requirements"><i class="fa fa-check"></i><b>3.4.3</b> Requirements</a></li>
<li class="chapter" data-level="3.4.4" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#steps-for-publishing-shinyapps"><i class="fa fa-check"></i><b>3.4.4</b> Steps for Publishing ShinyApps</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#rpubs"><i class="fa fa-check"></i><b>3.5</b> RPubs</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#what-is-rpubs"><i class="fa fa-check"></i><b>3.5.1</b> What is RPubs?</a></li>
<li class="chapter" data-level="3.5.2" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#register-an-account-with-rpubs"><i class="fa fa-check"></i><b>3.5.2</b> Register An Account With RPubs</a></li>
<li class="chapter" data-level="3.5.3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#requirements-1"><i class="fa fa-check"></i><b>3.5.3</b> Requirements</a></li>
<li class="chapter" data-level="3.5.4" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#steps-for-publishing-on-rpubs"><i class="fa fa-check"></i><b>3.5.4</b> Steps for Publishing on RPubs</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#github"><i class="fa fa-check"></i><b>3.6</b> Github</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#what-is-github"><i class="fa fa-check"></i><b>3.6.1</b> What is Github?</a></li>
<li class="chapter" data-level="3.6.2" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#register-a-github-account"><i class="fa fa-check"></i><b>3.6.2</b> Register A Github Account</a></li>
<li class="chapter" data-level="3.6.3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#getting-started-with-github"><i class="fa fa-check"></i><b>3.6.3</b> Getting Started With GitHub</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#sas-ondemand"><i class="fa fa-check"></i><b>3.7</b> SAS OnDemand</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#what-is-sas-ondemand-sas-studio"><i class="fa fa-check"></i><b>3.7.1</b> What is SAS OnDemand (SAS Studio)</a></li>
<li class="chapter" data-level="3.7.2" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#sign-in-sign-up"><i class="fa fa-check"></i><b>3.7.2</b> Sign-in / Sign-up</a></li>
<li class="chapter" data-level="3.7.3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#create-an-sas-profile"><i class="fa fa-check"></i><b>3.7.3</b> Create An SAS Profile</a></li>
<li class="chapter" data-level="3.7.4" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#log-into-sas-academic-ondemand"><i class="fa fa-check"></i><b>3.7.4</b> Log Into SAS Academic OnDemand</a></li>
<li class="chapter" data-level="3.7.5" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#sas-studio-user-interfacce"><i class="fa fa-check"></i><b>3.7.5</b> SAS Studio User Interfacce</a></li>
<li class="chapter" data-level="3.7.6" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#a-cautionary-note-on-data-security"><i class="fa fa-check"></i><b>3.7.6</b> <strong>A Cautionary Note On Data Security</strong></a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#r-viz-libraries"><i class="fa fa-check"></i><b>3.8</b> R Viz Libraries</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#tidyverse"><i class="fa fa-check"></i><b>3.8.1</b> Tidyverse</a></li>
<li class="chapter" data-level="3.8.2" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#ggplot2"><i class="fa fa-check"></i><b>3.8.2</b> ggplot2</a></li>
<li class="chapter" data-level="3.8.3" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#plotly"><i class="fa fa-check"></i><b>3.8.3</b> plotly</a></li>
<li class="chapter" data-level="3.8.4" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#leaflet"><i class="fa fa-check"></i><b>3.8.4</b> leaflet</a></li>
<li class="chapter" data-level="3.8.5" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#mapview"><i class="fa fa-check"></i><b>3.8.5</b> mapview</a></li>
<li class="chapter" data-level="3.8.6" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#tmap"><i class="fa fa-check"></i><b>3.8.6</b> tmap</a></li>
<li class="chapter" data-level="3.8.7" data-path="open-source-tools-for-data-viz.html"><a href="open-source-tools-for-data-viz.html#other-infrequently-used-packages"><i class="fa fa-check"></i><b>3.8.7</b> Other infrequently used packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-functions-and-flow-controls.html"><a href="r-functions-and-flow-controls.html"><i class="fa fa-check"></i><b>4</b> R Functions and Flow Controls</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-functions-and-flow-controls.html"><a href="r-functions-and-flow-controls.html#control-flow"><i class="fa fa-check"></i><b>4.1</b> Control flow</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="r-functions-and-flow-controls.html"><a href="r-functions-and-flow-controls.html#choices"><i class="fa fa-check"></i><b>4.1.1</b> Choices</a></li>
<li class="chapter" data-level="4.1.2" data-path="r-functions-and-flow-controls.html"><a href="r-functions-and-flow-controls.html#loops"><i class="fa fa-check"></i><b>4.1.2</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="r-functions-and-flow-controls.html"><a href="r-functions-and-flow-controls.html#functions"><i class="fa fa-check"></i><b>4.2</b> Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="r-functions-and-flow-controls.html"><a href="r-functions-and-flow-controls.html#function-fundamentals"><i class="fa fa-check"></i><b>4.2.1</b> Function fundamentals</a></li>
<li class="chapter" data-level="4.2.2" data-path="r-functions-and-flow-controls.html"><a href="r-functions-and-flow-controls.html#function-composition"><i class="fa fa-check"></i><b>4.2.2</b> Function Composition</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html"><i class="fa fa-check"></i><b>5</b> Getting Started with Base R Graphics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#base-graphics"><i class="fa fa-check"></i><b>5.1</b> Base Graphics</a></li>
<li class="chapter" data-level="5.2" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#simple-base-graphics"><i class="fa fa-check"></i><b>5.2</b> Simple Base Graphics</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#histogram"><i class="fa fa-check"></i><b>5.2.1</b> Histogram</a></li>
<li class="chapter" data-level="5.2.2" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#boxplot"><i class="fa fa-check"></i><b>5.2.2</b> Boxplot</a></li>
<li class="chapter" data-level="5.2.3" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#scatterplot"><i class="fa fa-check"></i><b>5.2.3</b> Scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#some-important-base-graphics-parameters"><i class="fa fa-check"></i><b>5.3</b> Some Important Base Graphics Parameters</a></li>
<li class="chapter" data-level="5.4" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#base-plotting-functions"><i class="fa fa-check"></i><b>5.4</b> Base Plotting Functions</a></li>
<li class="chapter" data-level="5.5" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#base-plot-with-regression-line"><i class="fa fa-check"></i><b>5.5</b> Base Plot with Regression Line</a></li>
<li class="chapter" data-level="5.6" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#multiple-base-plots"><i class="fa fa-check"></i><b>5.6</b> Multiple Base Plots</a></li>
<li class="chapter" data-level="5.7" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#controlling-point-size-and-transparency"><i class="fa fa-check"></i><b>5.7</b> Controlling Point Size and Transparency</a></li>
<li class="chapter" data-level="5.8" data-path="getting-started-with-base-r-graphics.html"><a href="getting-started-with-base-r-graphics.html#annotations"><i class="fa fa-check"></i><b>5.8</b> Annotations</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="foundations-of-data-visualization.html"><a href="foundations-of-data-visualization.html"><i class="fa fa-check"></i><b>6</b> Foundations of Data Visualization</a></li>
<li class="chapter" data-level="7" data-path="ethics-in-data-visualization.html"><a href="ethics-in-data-visualization.html"><i class="fa fa-check"></i><b>7</b> Ethics in Data Visualization</a></li>
<li class="chapter" data-level="8" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html"><i class="fa fa-check"></i><b>8</b> Data Processing with Tidyverse</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#data-cleaning-and-preparation-for-visualization"><i class="fa fa-check"></i><b>8.1</b> Data Cleaning and Preparation for Visualization</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#data-cleaning"><i class="fa fa-check"></i><b>8.1.1</b> Data Cleaning</a></li>
<li class="chapter" data-level="8.1.2" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#data-preparation-for-visualization"><i class="fa fa-check"></i><b>8.1.2</b> Data Preparation for Visualization</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#basic-data-management-merging-data-sets"><i class="fa fa-check"></i><b>8.2</b> Basic Data Management: Merging Data Sets</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#merge-data-sets"><i class="fa fa-check"></i><b>8.2.1</b> Merge Data Sets</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#merging-data-in-base-r"><i class="fa fa-check"></i><b>8.2.2</b> Merging Data in Base R</a></li>
<li class="chapter" data-level="8.2.3" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#merging-data-with-mutating-joins-in-dplyr"><i class="fa fa-check"></i><b>8.2.3</b> Merging Data with Mutating Joins in <strong>dplyr</strong></a></li>
<li class="chapter" data-level="8.2.4" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#use-of-pipe-operator-with-mutating-joins"><i class="fa fa-check"></i><b>8.2.4</b> Use of Pipe Operator <code>%&gt;%</code> with Mutating Joins</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#basic-data-management-subsetting-data"><i class="fa fa-check"></i><b>8.3</b> Basic Data Management: Subsetting Data</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#accessors-in-r-and"><i class="fa fa-check"></i><b>8.3.1</b> Accessors in R <code>[</code>, <code>[[</code> and <code>$</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#subsetting-data-in-base-r"><i class="fa fa-check"></i><b>8.3.2</b> Subsetting Data in Base R</a></li>
<li class="chapter" data-level="8.3.3" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#subsetting-data-with-dplyr"><i class="fa fa-check"></i><b>8.3.3</b> Subsetting Data with <code>dplyr</code></a></li>
<li class="chapter" data-level="8.3.4" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#variable-definition-and-variable-type-conversion"><i class="fa fa-check"></i><b>8.3.4</b> Variable Definition and Variable Type Conversion</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#importingexporting-data"><i class="fa fa-check"></i><b>8.4</b> Importing/Exporting Data</a></li>
<li class="chapter" data-level="8.5" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#importing-dara"><i class="fa fa-check"></i><b>8.5</b> Importing Dara</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#exporting-data"><i class="fa fa-check"></i><b>8.5.1</b> Exporting Data</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#overview-of-tidyverse-optional"><i class="fa fa-check"></i><b>8.6</b> <strong>Overview of <code>Tidyverse</code> (Optional)</strong></a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#packages-for-data-wrangling-and-transformation"><i class="fa fa-check"></i><b>8.6.1</b> Packages for Data Wrangling and Transformation</a></li>
<li class="chapter" data-level="8.6.2" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#packages-for-data-import-and-management"><i class="fa fa-check"></i><b>8.6.2</b> Packages for Data Import and Management</a></li>
<li class="chapter" data-level="8.6.3" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#functional-programming-with-library-purrr"><i class="fa fa-check"></i><b>8.6.3</b> Functional Programming with Library <strong>{purrr}</strong></a></li>
<li class="chapter" data-level="8.6.4" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#data-visualization-and-exploration"><i class="fa fa-check"></i><b>8.6.4</b> Data Visualization and Exploration</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#data-management-with-dplyr-optional"><i class="fa fa-check"></i><b>8.7</b> Data Management with <code>dplyr</code> (Optional)</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#common-dplyr-functions"><i class="fa fa-check"></i><b>8.7.1</b> Common <code>dplyr</code> Functions</a></li>
<li class="chapter" data-level="8.7.2" data-path="data-processing-with-tidyverse.html"><a href="data-processing-with-tidyverse.html#reshaping-functions-in-tidyr"><i class="fa fa-check"></i><b>8.7.2</b> Reshaping Functions in <code>tidyr</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html"><i class="fa fa-check"></i><b>9</b> Introduction to Ggplot</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#basics-of-ggplot"><i class="fa fa-check"></i><b>9.1</b> Basics of <code>ggplot()</code></a></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#structure-of-ggplot"><i class="fa fa-check"></i><b>9.2</b> Structure of <code>ggplot()</code></a></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#geoms"><i class="fa fa-check"></i><b>9.3</b> Geoms</a></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#mapping-data-to-plot"><i class="fa fa-check"></i><b>9.4</b> Mapping Data to Plot</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#arranging-multiple-grobs-on-the-same-page"><i class="fa fa-check"></i><b>9.4.1</b> Arranging Multiple Grobs on the Same Page</a></li>
<li class="chapter" data-level="9.4.2" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#plot-aesthetics"><i class="fa fa-check"></i><b>9.4.2</b> Plot Aesthetics</a></li>
<li class="chapter" data-level="9.4.3" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#labels-in-ggplot"><i class="fa fa-check"></i><b>9.4.3</b> Labels in <code>ggplot()</code></a></li>
<li class="chapter" data-level="9.4.4" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#themes-in-ggplot"><i class="fa fa-check"></i><b>9.4.4</b> Themes in <code>ggplot()</code></a></li>
<li class="chapter" data-level="9.4.5" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#complete-components-of-theme"><i class="fa fa-check"></i><b>9.4.5</b> Complete Components of Theme</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#adding-annotations-to-graphics"><i class="fa fa-check"></i><b>9.5</b> Adding Annotations to Graphics</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#adding-text-annotation-to-graphics"><i class="fa fa-check"></i><b>9.5.1</b> Adding Text Annotation to Graphics</a></li>
<li class="chapter" data-level="9.5.2" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#adding-mathematical-equations-to-graphics"><i class="fa fa-check"></i><b>9.5.2</b> Adding Mathematical Equations to Graphics</a></li>
<li class="chapter" data-level="9.5.3" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#adding-images-to-existing-ggplots"><i class="fa fa-check"></i><b>9.5.3</b> Adding Images to Existing ggPlots</a></li>
<li class="chapter" data-level="9.5.4" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#removing-chart-junks"><i class="fa fa-check"></i><b>9.5.4</b> Removing Chart Junks</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#aminated-graph-with-gganimate"><i class="fa fa-check"></i><b>9.6</b> Aminated Graph with <code>gganimate()</code></a></li>
<li class="chapter" data-level="9.7" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#ridgetline-plot-with-ggridges-library"><i class="fa fa-check"></i><b>9.7</b> Ridgetline Plot with <code>ggridges</code> Library</a></li>
<li class="chapter" data-level="9.8" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#other-extensions-to-ggplot"><i class="fa fa-check"></i><b>9.8</b> Other Extensions to ggplot</a></li>
<li class="chapter" data-level="9.9" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#save-ggplot-images"><i class="fa fa-check"></i><b>9.9</b> Save <code>ggplot</code> Images</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#general-steps"><i class="fa fa-check"></i><b>9.9.1</b> General Steps</a></li>
<li class="chapter" data-level="9.9.2" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#save-ggplot-into-a-pdf-file"><i class="fa fa-check"></i><b>9.9.2</b> Save <code>ggplot</code> into a PDF File</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="introduction-to-ggplot.html"><a href="introduction-to-ggplot.html#save-ggplot-with-ggsave"><i class="fa fa-check"></i><b>9.10</b> Save ggplot with <code>ggsave()</code></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html"><i class="fa fa-check"></i><b>10</b> Interactive Statistics Graphics</a>
<ul>
<li class="chapter" data-level="10.1" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#plotly-1"><i class="fa fa-check"></i><b>10.1</b> Plotly</a></li>
<li class="chapter" data-level="10.2" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#scatterplot-1"><i class="fa fa-check"></i><b>10.2</b> ScatterPlot</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#the-default-plot"><i class="fa fa-check"></i><b>10.2.1</b> The Default Plot</a></li>
<li class="chapter" data-level="10.2.2" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#addiing-additional-information-through-hovertemplate"><i class="fa fa-check"></i><b>10.2.2</b> Addiing Additional Information Through <code>hovertemplate</code></a></li>
<li class="chapter" data-level="10.2.3" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#enhancing-the-plot-with-layout-function"><i class="fa fa-check"></i><b>10.2.3</b> Enhancing the Plot with Layout() Function</a></li>
<li class="chapter" data-level="10.2.4" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#rendering-a-ggplot-with-ggplotly"><i class="fa fa-check"></i><b>10.2.4</b> Rendering A GGPLOT with <code>ggplotly</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#barplot"><i class="fa fa-check"></i><b>10.3</b> Barplot</a></li>
<li class="chapter" data-level="10.4" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#histogram-1"><i class="fa fa-check"></i><b>10.4</b> Histogram</a></li>
<li class="chapter" data-level="10.5" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#boxplot-1"><i class="fa fa-check"></i><b>10.5</b> Boxplot</a></li>
<li class="chapter" data-level="10.6" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#pie-chart"><i class="fa fa-check"></i><b>10.6</b> Pie Chart</a></li>
<li class="chapter" data-level="10.7" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#density-curve"><i class="fa fa-check"></i><b>10.7</b> Density Curve</a></li>
<li class="chapter" data-level="10.8" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#serial-plot"><i class="fa fa-check"></i><b>10.8</b> Serial Plot</a></li>
<li class="chapter" data-level="10.9" data-path="interactive-statistics-graphics.html"><a href="interactive-statistics-graphics.html#plotly-maps"><i class="fa fa-check"></i><b>10.9</b> Plotly Maps</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>11</b> Interactive Maps</a>
<ul>
<li class="chapter" data-level="11.1" data-path="interactive-maps.html"><a href="interactive-maps.html#map-types"><i class="fa fa-check"></i><b>11.1</b> Map Types</a></li>
<li class="chapter" data-level="11.2" data-path="interactive-maps.html"><a href="interactive-maps.html#leaflet-maps"><i class="fa fa-check"></i><b>11.2</b> Leaflet Maps</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="interactive-maps.html"><a href="interactive-maps.html#introduction-1"><i class="fa fa-check"></i><b>11.2.1</b> 1. Introduction</a></li>
<li class="chapter" data-level="11.2.2" data-path="interactive-maps.html"><a href="interactive-maps.html#customizing-marker-icons"><i class="fa fa-check"></i><b>11.2.2</b> 2. Customizing Marker Icons</a></li>
<li class="chapter" data-level="11.2.3" data-path="interactive-maps.html"><a href="interactive-maps.html#popups-and-labels"><i class="fa fa-check"></i><b>11.2.3</b> 3. Popups and Labels</a></li>
<li class="chapter" data-level="11.2.4" data-path="interactive-maps.html"><a href="interactive-maps.html#examples-using-real-world-data"><i class="fa fa-check"></i><b>11.2.4</b> 4. Examples Using Real-World Data</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="interactive-maps.html"><a href="interactive-maps.html#choropleth-maps"><i class="fa fa-check"></i><b>11.3</b> Choropleth Maps</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="interactive-maps.html"><a href="interactive-maps.html#loading-data"><i class="fa fa-check"></i><b>11.3.1</b> Loading Data</a></li>
<li class="chapter" data-level="11.3.2" data-path="interactive-maps.html"><a href="interactive-maps.html#load-map-shape-data"><i class="fa fa-check"></i><b>11.3.2</b> Load Map Shape Data</a></li>
<li class="chapter" data-level="11.3.3" data-path="interactive-maps.html"><a href="interactive-maps.html#merge-the-map-data-with-the-price-data"><i class="fa fa-check"></i><b>11.3.3</b> Merge the Map Data with the Price Data</a></li>
<li class="chapter" data-level="11.3.4" data-path="interactive-maps.html"><a href="interactive-maps.html#color-states-based-on-unit-price"><i class="fa fa-check"></i><b>11.3.4</b> Color States Based On Unit Price</a></li>
<li class="chapter" data-level="11.3.5" data-path="interactive-maps.html"><a href="interactive-maps.html#labeling-cost-information"><i class="fa fa-check"></i><b>11.3.5</b> 5. Labeling Cost Information</a></li>
<li class="chapter" data-level="11.3.6" data-path="interactive-maps.html"><a href="interactive-maps.html#finalizing-the-map"><i class="fa fa-check"></i><b>11.3.6</b> 6. Finalizing The Map</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="interactive-maps.html"><a href="interactive-maps.html#plotly-map"><i class="fa fa-check"></i><b>11.4</b> Plotly Map</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="interactive-maps.html"><a href="interactive-maps.html#choropleth-maps-with-plot_geo"><i class="fa fa-check"></i><b>11.4.1</b> 2. Choropleth Maps with <code>plot_geo()</code></a></li>
<li class="chapter" data-level="11.4.2" data-path="interactive-maps.html"><a href="interactive-maps.html#scatter-map-with-plot_geo-and-add_markers"><i class="fa fa-check"></i><b>11.4.2</b> 3.Scatter Map with <code>plot_geo()</code> and <code>add_markers()</code></a></li>
<li class="chapter" data-level="11.4.3" data-path="interactive-maps.html"><a href="interactive-maps.html#custom-map-with-special-libraries"><i class="fa fa-check"></i><b>11.4.3</b> 4. Custom Map With Special Libraries</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="interactive-maps.html"><a href="interactive-maps.html#mapview-maps"><i class="fa fa-check"></i><b>11.5</b> Mapview Maps</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="interactive-maps.html"><a href="interactive-maps.html#choropleth-map-with-mapview"><i class="fa fa-check"></i><b>11.5.1</b> 1. Choropleth Map with <code>mapview</code></a></li>
<li class="chapter" data-level="11.5.2" data-path="interactive-maps.html"><a href="interactive-maps.html#scatter-map-with-mapview"><i class="fa fa-check"></i><b>11.5.2</b> 2. Scatter Map with <code>mapview</code></a></li>
<li class="chapter" data-level="11.5.3" data-path="interactive-maps.html"><a href="interactive-maps.html#scatter-map-without-using-sf-object"><i class="fa fa-check"></i><b>11.5.3</b> 3. Scatter Map Without Using <code>sf</code> Object</a></li>
<li class="chapter" data-level="11.5.4" data-path="interactive-maps.html"><a href="interactive-maps.html#customizing-default-maps"><i class="fa fa-check"></i><b>11.5.4</b> 4. Customizing Default Maps</a></li>
<li class="chapter" data-level="11.5.5" data-path="interactive-maps.html"><a href="interactive-maps.html#mapview-options"><i class="fa fa-check"></i><b>11.5.5</b> 5. Mapview Options</a></li>
<li class="chapter" data-level="11.5.6" data-path="interactive-maps.html"><a href="interactive-maps.html#more-enhancements-of-mapview-leaflet"><i class="fa fa-check"></i><b>11.5.6</b> 6. More Enhancements of Mapview (Leaflet)</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="interactive-maps.html"><a href="interactive-maps.html#thematic-maps"><i class="fa fa-check"></i><b>11.6</b> Thematic Maps</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="interactive-maps.html"><a href="interactive-maps.html#choropleth-maps-1"><i class="fa fa-check"></i><b>11.6.1</b> 1. Choropleth Maps</a></li>
<li class="chapter" data-level="11.6.2" data-path="interactive-maps.html"><a href="interactive-maps.html#mixed-maps-multilayer"><i class="fa fa-check"></i><b>11.6.2</b> Mixed Maps (Multilayer)</a></li>
<li class="chapter" data-level="11.6.3" data-path="interactive-maps.html"><a href="interactive-maps.html#scatter-maps-with-geocoordinates"><i class="fa fa-check"></i><b>11.6.3</b> Scatter Maps With geoCoordinates</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="interactive-maps.html"><a href="interactive-maps.html#tableau-maps"><i class="fa fa-check"></i><b>11.7</b> Tableau Maps</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="interactive-maps.html"><a href="interactive-maps.html#choropleth-map"><i class="fa fa-check"></i><b>11.7.1</b> Choropleth Map</a></li>
<li class="chapter" data-level="11.7.2" data-path="interactive-maps.html"><a href="interactive-maps.html#scatter-map"><i class="fa fa-check"></i><b>11.7.2</b> Scatter Map</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="interactive-maps.html"><a href="interactive-maps.html#r-color-palettes"><i class="fa fa-check"></i><b>11.8</b> R Color Palettes</a>
<ul>
<li class="chapter" data-level="11.8.1" data-path="interactive-maps.html"><a href="interactive-maps.html#all-palettes"><i class="fa fa-check"></i><b>11.8.1</b> All Palettes</a></li>
<li class="chapter" data-level="11.8.2" data-path="interactive-maps.html"><a href="interactive-maps.html#color-bind-friendly-palettes"><i class="fa fa-check"></i><b>11.8.2</b> <strong>2. Color-bind Friendly Palettes</strong></a></li>
<li class="chapter" data-level="11.8.3" data-path="interactive-maps.html"><a href="interactive-maps.html#color-palette-codes"><i class="fa fa-check"></i><b>11.8.3</b> <strong>3. Color Palette Codes</strong></a></li>
<li class="chapter" data-level="11.8.4" data-path="interactive-maps.html"><a href="interactive-maps.html#functions-for-selecting-specific-color-palettes"><i class="fa fa-check"></i><b>11.8.4</b> <strong>4. Functions for Selecting Specific Color Palettes</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="a-mapview-map-demo.html"><a href="a-mapview-map-demo.html"><i class="fa fa-check"></i><b>12</b> A <code>mapview</code> Map Demo</a></li>
<li class="chapter" data-level="13" data-path="creating-maps-using-shapefiles.html"><a href="creating-maps-using-shapefiles.html"><i class="fa fa-check"></i><b>13</b> Creating Maps Using Shapefiles</a>
<ul>
<li class="chapter" data-level="13.1" data-path="creating-maps-using-shapefiles.html"><a href="creating-maps-using-shapefiles.html#existing-base-map-file-and-new-information"><i class="fa fa-check"></i><b>13.1</b> Existing Base Map File and New Information</a></li>
<li class="chapter" data-level="13.2" data-path="creating-maps-using-shapefiles.html"><a href="creating-maps-using-shapefiles.html#creating-shapefiles-from-dataframes"><i class="fa fa-check"></i><b>13.2</b> Creating Shapefiles from Dataframes</a></li>
<li class="chapter" data-level="13.3" data-path="creating-maps-using-shapefiles.html"><a href="creating-maps-using-shapefiles.html#thematics-map-with-created-and-built-in-shapefiles"><i class="fa fa-check"></i><b>13.3</b> Thematics Map with Created and Built-in Shapefiles</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="creating-maps-using-shapefiles.html"><a href="creating-maps-using-shapefiles.html#example-1-gapminder-data"><i class="fa fa-check"></i><b>13.3.1</b> Example 1: Gapminder Data</a></li>
<li class="chapter" data-level="13.3.2" data-path="creating-maps-using-shapefiles.html"><a href="creating-maps-using-shapefiles.html#example-2-philadelphia-neighborhood-shapefiles-in-json"><i class="fa fa-check"></i><b>13.3.2</b> Example 2: Philadelphia Neighborhood Shapefiles in Json</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html"><i class="fa fa-check"></i><b>14</b> Introduction to Tableau</a>
<ul>
<li class="chapter" data-level="14.1" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#data-loading"><i class="fa fa-check"></i><b>14.1</b> Data Loading</a></li>
<li class="chapter" data-level="14.2" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#opening-work-sheet"><i class="fa fa-check"></i><b>14.2</b> Opening Work Sheet</a></li>
<li class="chapter" data-level="14.3" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#basic-statistical-charts-with-existing-variables"><i class="fa fa-check"></i><b>14.3</b> Basic Statistical Charts with Existing Variables</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#bar-chart"><i class="fa fa-check"></i><b>14.3.1</b> Bar Chart</a></li>
<li class="chapter" data-level="14.3.2" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#pie-chart-1"><i class="fa fa-check"></i><b>14.3.2</b> Pie Chart</a></li>
<li class="chapter" data-level="14.3.3" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#histogram-2"><i class="fa fa-check"></i><b>14.3.3</b> Histogram</a></li>
<li class="chapter" data-level="14.3.4" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#box-plot"><i class="fa fa-check"></i><b>14.3.4</b> Box-plot</a></li>
<li class="chapter" data-level="14.3.5" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#line-chart"><i class="fa fa-check"></i><b>14.3.5</b> Line Chart</a></li>
<li class="chapter" data-level="14.3.6" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#scatter-plot"><i class="fa fa-check"></i><b>14.3.6</b> Scatter Plot</a></li>
<li class="chapter" data-level="14.3.7" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#bubble-chart"><i class="fa fa-check"></i><b>14.3.7</b> Bubble Chart</a></li>
<li class="chapter" data-level="14.3.8" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#treemap"><i class="fa fa-check"></i><b>14.3.8</b> Treemap</a></li>
<li class="chapter" data-level="14.3.9" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#maps"><i class="fa fa-check"></i><b>14.3.9</b> Maps</a></li>
<li class="chapter" data-level="14.3.10" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#density-maps"><i class="fa fa-check"></i><b>14.3.10</b> Density Maps</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#basic-charts-with-derived-variables"><i class="fa fa-check"></i><b>14.4</b> Basic Charts with Derived Variables</a></li>
<li class="chapter" data-level="14.5" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#tableau-dashboards"><i class="fa fa-check"></i><b>14.5</b> Tableau Dashboards</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#design-dashboards-with-tableau"><i class="fa fa-check"></i><b>14.5.1</b> Design Dashboards with Tableau</a></li>
<li class="chapter" data-level="14.5.2" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#tableau-story-point"><i class="fa fa-check"></i><b>14.5.2</b> Tableau Story Point</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="introduction-to-tableau.html"><a href="introduction-to-tableau.html#some-youtube-tutorials-on-tableau"><i class="fa fa-check"></i><b>14.6</b> Some Youtube Tutorials on Tableau</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html"><i class="fa fa-check"></i><b>15</b> Getting Started with R Shiny</a>
<ul>
<li class="chapter" data-level="15.1" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#the-ide-of-rshiny-apps"><i class="fa fa-check"></i><b>15.1</b> The IDE of RShiny Apps</a></li>
<li class="chapter" data-level="15.2" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#embedding-shiny-apps-in-rmarkdown"><i class="fa fa-check"></i><b>15.2</b> Embedding Shiny Apps in RMarkdown</a></li>
<li class="chapter" data-level="15.3" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#components-of-an-shiny-applications"><i class="fa fa-check"></i><b>15.3</b> Components of An Shiny Applications</a></li>
<li class="chapter" data-level="15.4" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#the-anatomy-of-a-shiny-application"><i class="fa fa-check"></i><b>15.4</b> The Anatomy of a Shiny Application</a></li>
<li class="chapter" data-level="15.5" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#how-shiny-apps-work"><i class="fa fa-check"></i><b>15.5</b> How Shiny Apps Work?</a></li>
<li class="chapter" data-level="15.6" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#some-built-in-demonstrations-of-shiny-apps"><i class="fa fa-check"></i><b>15.6</b> Some Built-in Demonstrations of Shiny Apps</a></li>
<li class="chapter" data-level="15.7" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#ui-layout-designs---a-glance"><i class="fa fa-check"></i><b>15.7</b> UI Layout Designs - A Glance</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#siderbar-layout"><i class="fa fa-check"></i><b>15.7.1</b> Siderbar Layout</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#some-basic-input-widgets"><i class="fa fa-check"></i><b>15.8</b> Some Basic Input Widgets</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#free-text"><i class="fa fa-check"></i><b>15.8.1</b> Free Text</a></li>
<li class="chapter" data-level="15.8.2" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#numeric-inputs"><i class="fa fa-check"></i><b>15.8.2</b> Numeric Inputs</a></li>
<li class="chapter" data-level="15.8.3" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#limited-choices"><i class="fa fa-check"></i><b>15.8.3</b> Limited Choices</a></li>
<li class="chapter" data-level="15.8.4" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#file-uploading-and-downloading"><i class="fa fa-check"></i><b>15.8.4</b> File Uploading and Downloading</a></li>
</ul></li>
<li class="chapter" data-level="15.9" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#case-study-i---density-of-normal-distribution"><i class="fa fa-check"></i><b>15.9</b> Case Study I - Density of Normal Distribution</a></li>
<li class="chapter" data-level="15.10" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#case-study-2---central-limit-theorem"><i class="fa fa-check"></i><b>15.10</b> Case Study 2 - Central Limit Theorem</a></li>
<li class="chapter" data-level="15.11" data-path="getting-started-with-r-shiny.html"><a href="getting-started-with-r-shiny.html#more-effective-code"><i class="fa fa-check"></i><b>15.11</b> More Effective Code</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="shiny-ui-and-server-design.html"><a href="shiny-ui-and-server-design.html"><i class="fa fa-check"></i><b>16</b> Shiny UI and Server Design</a>
<ul>
<li class="chapter" data-level="16.1" data-path="shiny-ui-and-server-design.html"><a href="shiny-ui-and-server-design.html#naming-conventions-revisited"><i class="fa fa-check"></i><b>16.1</b> Naming Conventions Revisited</a></li>
<li class="chapter" data-level="16.2" data-path="shiny-ui-and-server-design.html"><a href="shiny-ui-and-server-design.html#working-data-set"><i class="fa fa-check"></i><b>16.2</b> Working Data Set</a></li>
<li class="chapter" data-level="16.3" data-path="shiny-ui-and-server-design.html"><a href="shiny-ui-and-server-design.html#ui-module-front-end-design"><i class="fa fa-check"></i><b>16.3</b> UI Module: Front-end Design</a></li>
<li class="chapter" data-level="16.4" data-path="shiny-ui-and-server-design.html"><a href="shiny-ui-and-server-design.html#server-module-back-end-coding"><i class="fa fa-check"></i><b>16.4</b> Server Module: Back-end Coding</a></li>
<li class="chapter" data-level="16.5" data-path="shiny-ui-and-server-design.html"><a href="shiny-ui-and-server-design.html#file-uploading"><i class="fa fa-check"></i><b>16.5</b> File Uploading</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html"><i class="fa fa-check"></i><b>17</b> Shiny Dashboard and Storyboard</a>
<ul>
<li class="chapter" data-level="17.1" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#flexdashboard"><i class="fa fa-check"></i><b>17.1</b> <strong>flexdashboard</strong></a></li>
<li class="chapter" data-level="17.2" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#shinydashboard"><i class="fa fa-check"></i><b>17.2</b> <strong>shinydashboard</strong></a></li>
<li class="chapter" data-level="17.3" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#three-web-application-terms"><i class="fa fa-check"></i><b>17.3</b> Three Web Application Terms</a></li>
<li class="chapter" data-level="17.4" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#using-flexdashboard"><i class="fa fa-check"></i><b>17.4</b> Using Flexdashboard</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#components"><i class="fa fa-check"></i><b>17.4.1</b> Components</a></li>
<li class="chapter" data-level="17.4.2" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#basic-flexdashboar-layout"><i class="fa fa-check"></i><b>17.4.2</b> Basic Flexdashboar Layout</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#storyboards"><i class="fa fa-check"></i><b>17.5</b> Storyboards</a>
<ul>
<li class="chapter" data-level="17.5.1" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#storyboard-basics"><i class="fa fa-check"></i><b>17.5.1</b> Storyboard Basics</a></li>
<li class="chapter" data-level="17.5.2" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#storyboard-pages"><i class="fa fa-check"></i><b>17.5.2</b> Storyboard Pages</a></li>
<li class="chapter" data-level="17.5.3" data-path="shiny-dashboard-and-storyboard.html"><a href="shiny-dashboard-and-storyboard.html#commentary"><i class="fa fa-check"></i><b>17.5.3</b> Commentary</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STA553 E-Pack: Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-processing-with-tidyverse" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Topic 8</span> Data Processing with Tidyverse<a href="data-processing-with-tidyverse.html#data-processing-with-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Data visualization is a form of data analysis (also called visual analytics). This means we need to prepare data sets that are appropriate for visualizations. Recall the following work flow of data visualizations mentioned in earlier notes.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-100"></span>
<img src="img04/Workflow.png" alt="Tidyverse workflow." width="85%" />
<p class="caption">
Figure 8.1: Tidyverse workflow.
</p>
</div>
<p>The major data management tasks are data aggregation and extraction.</p>
<ul>
<li><p><strong>Information Aggregation</strong> - combining information in different relational data sets to make an integrated single data set for data visualization.</p></li>
<li><p><strong>Information Extraction</strong> - subsetting a single data set to make small data sets that have specific information for creating a visualization.</p></li>
</ul>
<p>The base R package has some powerful and easy-to-use functions to perform these types of data management.</p>
<div id="data-cleaning-and-preparation-for-visualization" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Data Cleaning and Preparation for Visualization<a href="data-processing-with-tidyverse.html#data-cleaning-and-preparation-for-visualization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="data-cleaning" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Data Cleaning<a href="data-processing-with-tidyverse.html#data-cleaning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data cleaning refers to the process of making a data set possibly from different sources of <code>raw data</code> for modeling, visualization, and relevant analysis. The major tasks include:</p>
<ul>
<li>Removing unnecessary variables</li>
<li>Deleting duplicate rows/observations</li>
<li>Addressing outliers or invalid data</li>
<li>Dealing with missing values</li>
<li>Standardizing or categorizing values</li>
<li>Correcting typographical errors</li>
</ul>
</div>
<div id="data-preparation-for-visualization" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Data Preparation for Visualization<a href="data-processing-with-tidyverse.html#data-preparation-for-visualization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For a specific data analysis such as modeling or data visualization, we need to create an analytic data set based on clean data sets.</p>
<p><strong>Formatting/Conversion</strong></p>
<ul>
<li>Formatting columns appropriately (numbers are treated as numbers, dates as dates)</li>
<li>Convert values into appropriate units</li>
</ul>
<p><strong>Filtering/Subsetting</strong></p>
<ul>
<li>Filter your data to focus on the specific data that interests you.</li>
<li>Group data and create aggregate values for groups (Counts, Min, Max, Mean, Median, Mode)</li>
<li>Extract values from complex columns</li>
</ul>
<p><strong>Aggregation/Merging</strong></p>
<ul>
<li>Combine variables to create new columns</li>
<li>Merge different relational data sets</li>
</ul>
</div>
</div>
<div id="basic-data-management-merging-data-sets" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Basic Data Management: Merging Data Sets<a href="data-processing-with-tidyverse.html#basic-data-management-merging-data-sets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are different packages in R that have various functions capable of doing data management. In this note, we introduce the commonly used functions in base R and <code>tidyverse</code>.</p>
<div id="merge-data-sets" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Merge Data Sets<a href="data-processing-with-tidyverse.html#merge-data-sets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is very common that the information we are interested in resides in different data sources. In order to merge different data sets, there must be at least one variable key that links to different data sets.</p>
<p>There are several different operations in SQL to create different types of the merged data set. The following are the most commonly used ones.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-101"></span>
<img src="img04/joins.png" alt="Table joins." width="85%" />
<p class="caption">
Figure 8.2: Table joins.
</p>
</div>
<p>The next figure shows the basic operations with tiny tables illustrating the operations.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-102"></span>
<img src="img04/JoinExamples.png" alt="An illustrative example of table join." width="85%" />
<p class="caption">
Figure 8.3: An illustrative example of table join.
</p>
</div>
</div>
<div id="merging-data-in-base-r" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Merging Data in Base R<a href="data-processing-with-tidyverse.html#merging-data-in-base-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The base R function <code>merge()</code> can be used to perform different joins. To illustrate, we use the tiny toy data set in the above figure to show you how to use <code>merge()</code> function.</p>
<ul>
<li>Defining Data Frames</li>
</ul>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-processing-with-tidyverse.html#cb118-1" tabindex="-1"></a>employee <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">EmpID =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">EmpName =</span> <span class="fu">c</span>(<span class="st">&quot;Rajendra&quot;</span>, <span class="st">&quot;Kusum&quot;</span>, <span class="st">&quot;Akshita&quot;</span>))</span>
<span id="cb118-2"><a href="data-processing-with-tidyverse.html#cb118-2" tabindex="-1"></a>city <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">8</span>), <span class="at">City =</span><span class="fu">c</span>(<span class="st">&quot;Jaipur&quot;</span>, <span class="st">&quot;Delhi&quot;</span>, <span class="st">&quot;Raipur&quot;</span>, <span class="st">&quot;Bangalore&quot;</span>))</span></code></pre></div>
<ul>
<li>Inner Join</li>
</ul>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data-processing-with-tidyverse.html#cb119-1" tabindex="-1"></a>innerjoin <span class="ot">=</span> <span class="fu">merge</span>(<span class="at">x=</span>employee, city, <span class="at">by.x =</span> <span class="st">&#39;EmpID&#39;</span>, <span class="at">by.y =</span><span class="st">&#39;ID&#39;</span>, <span class="at">all =</span> <span class="cn">FALSE</span>)</span>
<span id="cb119-2"><a href="data-processing-with-tidyverse.html#cb119-2" tabindex="-1"></a>innerjoin</span></code></pre></div>
<pre><code>##   EmpID  EmpName   City
## 1     1 Rajendra Jaipur
## 2     2    Kusum  Delhi</code></pre>
<ul>
<li>Outer Join</li>
</ul>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="data-processing-with-tidyverse.html#cb121-1" tabindex="-1"></a>innerjoin <span class="ot">=</span> <span class="fu">merge</span>(<span class="at">x =</span> employee, <span class="at">y =</span> city, <span class="at">by.x =</span> <span class="st">&#39;EmpID&#39;</span>, <span class="at">by.y =</span><span class="st">&#39;ID&#39;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb121-2"><a href="data-processing-with-tidyverse.html#cb121-2" tabindex="-1"></a>innerjoin</span></code></pre></div>
<pre><code>##   EmpID  EmpName      City
## 1     1 Rajendra    Jaipur
## 2     2    Kusum     Delhi
## 3     3  Akshita      &lt;NA&gt;
## 4     7     &lt;NA&gt;    Raipur
## 5     8     &lt;NA&gt; Bangalore</code></pre>
<ul>
<li>Left Join</li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="data-processing-with-tidyverse.html#cb123-1" tabindex="-1"></a>leftjoin <span class="ot">=</span> <span class="fu">merge</span>(<span class="at">x =</span> employee, <span class="at">y =</span> city, <span class="at">by.x =</span> <span class="st">&#39;EmpID&#39;</span>, <span class="at">by.y =</span><span class="st">&#39;ID&#39;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb123-2"><a href="data-processing-with-tidyverse.html#cb123-2" tabindex="-1"></a>leftjoin </span></code></pre></div>
<pre><code>##   EmpID  EmpName   City
## 1     1 Rajendra Jaipur
## 2     2    Kusum  Delhi
## 3     3  Akshita   &lt;NA&gt;</code></pre>
<ul>
<li>Right Join</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-processing-with-tidyverse.html#cb125-1" tabindex="-1"></a>rightjoin <span class="ot">=</span> <span class="fu">merge</span>(<span class="at">x =</span> employee, <span class="at">y =</span> city, <span class="at">by.x =</span> <span class="st">&#39;EmpID&#39;</span>, <span class="at">by.y =</span><span class="st">&#39;ID&#39;</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb125-2"><a href="data-processing-with-tidyverse.html#cb125-2" tabindex="-1"></a>rightjoin</span></code></pre></div>
<pre><code>##   EmpID  EmpName      City
## 1     1 Rajendra    Jaipur
## 2     2    Kusum     Delhi
## 3     7     &lt;NA&gt;    Raipur
## 4     8     &lt;NA&gt; Bangalore</code></pre>
</div>
<div id="merging-data-with-mutating-joins-in-dplyr" class="section level3 hasAnchor" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> Merging Data with Mutating Joins in <strong>dplyr</strong><a href="data-processing-with-tidyverse.html#merging-data-with-mutating-joins-in-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The package <strong>dplyr</strong> has the following four join functions corresponding to the options in the base R function merge()`.</p>
<p>The mutating joins add columns from y to x, matching rows based on the keys:</p>
<ul>
<li><p><code>inner_join()</code>: includes all rows in x and y.</p></li>
<li><p><code>left_join()</code>: includes all rows in x.</p></li>
<li><p><code>right_join()</code>: includes all rows in y.</p></li>
<li><p><code>full_join()</code> (also called <strong>outer join</strong>): includes all rows in x or y (also called outer join)..</p></li>
</ul>
<p>If a row in x matches multiple rows in y, all the rows in y will be returned once for each matching row in x.</p>
<p>To use mutating joins, we first rename key variables so that primary keys have the same name.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="data-processing-with-tidyverse.html#cb127-1" tabindex="-1"></a>employee.new <span class="ot">=</span> employee</span>
<span id="cb127-2"><a href="data-processing-with-tidyverse.html#cb127-2" tabindex="-1"></a>employee.new<span class="sc">$</span>ID <span class="ot">=</span> employee<span class="sc">$</span>EmpID  <span class="co"># adding the new renamed ID</span></span>
<span id="cb127-3"><a href="data-processing-with-tidyverse.html#cb127-3" tabindex="-1"></a>employee.new <span class="ot">=</span> employee.new[, <span class="sc">-</span><span class="dv">1</span>]     <span class="co"># drop the old ID variable</span></span>
<span id="cb127-4"><a href="data-processing-with-tidyverse.html#cb127-4" tabindex="-1"></a>employee.new</span></code></pre></div>
<pre><code>##    EmpName ID
## 1 Rajendra  1
## 2    Kusum  2
## 3  Akshita  3</code></pre>
<ul>
<li>Inner Join</li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="data-processing-with-tidyverse.html#cb129-1" tabindex="-1"></a><span class="fu">inner_join</span>(employee.new, city, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##    EmpName ID   City
## 1 Rajendra  1 Jaipur
## 2    Kusum  2  Delhi</code></pre>
<ul>
<li>Left Join</li>
</ul>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="data-processing-with-tidyverse.html#cb131-1" tabindex="-1"></a><span class="fu">left_join</span>(employee.new, city, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##    EmpName ID   City
## 1 Rajendra  1 Jaipur
## 2    Kusum  2  Delhi
## 3  Akshita  3   &lt;NA&gt;</code></pre>
<ul>
<li>right Join</li>
</ul>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="data-processing-with-tidyverse.html#cb133-1" tabindex="-1"></a><span class="fu">right_join</span>(employee.new, city, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##    EmpName ID      City
## 1 Rajendra  1    Jaipur
## 2    Kusum  2     Delhi
## 3     &lt;NA&gt;  7    Raipur
## 4     &lt;NA&gt;  8 Bangalore</code></pre>
<ul>
<li>Full (Outer) Join</li>
</ul>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="data-processing-with-tidyverse.html#cb135-1" tabindex="-1"></a><span class="fu">full_join</span>(employee.new, city, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##    EmpName ID      City
## 1 Rajendra  1    Jaipur
## 2    Kusum  2     Delhi
## 3  Akshita  3      &lt;NA&gt;
## 4     &lt;NA&gt;  7    Raipur
## 5     &lt;NA&gt;  8 Bangalore</code></pre>
</div>
<div id="use-of-pipe-operator-with-mutating-joins" class="section level3 hasAnchor" number="8.2.4">
<h3><span class="header-section-number">8.2.4</span> Use of Pipe Operator <code>%&gt;%</code> with Mutating Joins<a href="data-processing-with-tidyverse.html#use-of-pipe-operator-with-mutating-joins" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The pipe operator, written as <code>%&gt;%</code> takes the output of one function and passes it into another function as an argument. This allows us to link a sequence of analysis steps using functions in <code>dplyr</code> and <code>tidyr</code> in data wrangling.</p>
<ul>
<li>Inner Join</li>
</ul>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="data-processing-with-tidyverse.html#cb137-1" tabindex="-1"></a>pipe.innerjoin <span class="ot">&lt;-</span> employee <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(city, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;EmpID&quot;</span> <span class="ot">=</span> <span class="st">&quot;ID&quot;</span>))</span>
<span id="cb137-2"><a href="data-processing-with-tidyverse.html#cb137-2" tabindex="-1"></a>pipe.innerjoin</span></code></pre></div>
<pre><code>##   EmpID  EmpName   City
## 1     1 Rajendra Jaipur
## 2     2    Kusum  Delhi</code></pre>
<ul>
<li>Full (Outer) Join</li>
</ul>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="data-processing-with-tidyverse.html#cb139-1" tabindex="-1"></a>pipe.outerjoin <span class="ot">&lt;-</span> employee <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(city, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;EmpID&quot;</span> <span class="ot">=</span> <span class="st">&quot;ID&quot;</span>))</span>
<span id="cb139-2"><a href="data-processing-with-tidyverse.html#cb139-2" tabindex="-1"></a>pipe.outerjoin</span></code></pre></div>
<pre><code>##   EmpID  EmpName      City
## 1     1 Rajendra    Jaipur
## 2     2    Kusum     Delhi
## 3     3  Akshita      &lt;NA&gt;
## 4     7     &lt;NA&gt;    Raipur
## 5     8     &lt;NA&gt; Bangalore</code></pre>
<ul>
<li>Left Join</li>
</ul>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="data-processing-with-tidyverse.html#cb141-1" tabindex="-1"></a>pipe.leftjoin <span class="ot">&lt;-</span> employee <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(city, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;EmpID&quot;</span> <span class="ot">=</span> <span class="st">&quot;ID&quot;</span>))</span>
<span id="cb141-2"><a href="data-processing-with-tidyverse.html#cb141-2" tabindex="-1"></a>pipe.leftjoin</span></code></pre></div>
<pre><code>##   EmpID  EmpName   City
## 1     1 Rajendra Jaipur
## 2     2    Kusum  Delhi
## 3     3  Akshita   &lt;NA&gt;</code></pre>
<ul>
<li>Right Join</li>
</ul>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="data-processing-with-tidyverse.html#cb143-1" tabindex="-1"></a>pipe.rightjoin <span class="ot">&lt;-</span> employee <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(city, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;EmpID&quot;</span> <span class="ot">=</span> <span class="st">&quot;ID&quot;</span>))</span>
<span id="cb143-2"><a href="data-processing-with-tidyverse.html#cb143-2" tabindex="-1"></a>pipe.rightjoin</span></code></pre></div>
<pre><code>##   EmpID  EmpName      City
## 1     1 Rajendra    Jaipur
## 2     2    Kusum     Delhi
## 3     7     &lt;NA&gt;    Raipur
## 4     8     &lt;NA&gt; Bangalore</code></pre>
</div>
</div>
<div id="basic-data-management-subsetting-data" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Basic Data Management: Subsetting Data<a href="data-processing-with-tidyverse.html#basic-data-management-subsetting-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another important data management task is to subset data sets to extract the desired information for analyses and visualization.</p>
<p>Two operations are used to subset a data set: select/drop columns and select rows that meet certain conditions.</p>
<p>The working data set in the section is the well-known <code>iris</code> data set that has 4 numerical variables (attributes of iris flowers) and a categorical variable (species of iris flowers).</p>
<div id="accessors-in-r-and" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Accessors in R <code>[</code>, <code>[[</code> and <code>$</code><a href="data-processing-with-tidyverse.html#accessors-in-r-and" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When subsetting a data set, it is unavoidable to access the value(s) of certain variable(s). Three R accessors are commonly used in R coding.</p>
<ul>
<li><code>[</code> subsetting a data set</li>
</ul>
<p>This R accessor is probably the most commonly used. When we want a subset of an object using <code>[</code>. Remember that when we take a subset of the object you get <code>the same type</code> of thing. Thus, the subset of a vector will be a vector, the subset of a list will be a list and the subset of a data.frame will be a data.frame.</p>
<ul>
<li><code>[[</code> extracting one item</li>
</ul>
<p>The double square brackets are used to extract one element from potentially many. For vectors yield vectors with a single value; data frames give a column vector; for a list, one element:</p>
<p>For example,</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="data-processing-with-tidyverse.html#cb145-1" tabindex="-1"></a>letters[[<span class="dv">3</span>]]            <span class="co"># extracts the third element in the vector of all lower case letters</span></span></code></pre></div>
<pre><code>## [1] &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data-processing-with-tidyverse.html#cb147-1" tabindex="-1"></a>iris[[<span class="st">&quot;Petal.Length&quot;</span>]]  <span class="co"># extract the variable named &#39;Petal.Length&#39; in the data frame.</span></span></code></pre></div>
<pre><code>##   [1] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 1.5 1.6 1.4 1.1 1.2 1.5 1.3 1.4 1.7 1.5 1.7 1.5 1.0 1.7 1.9 1.6 1.6
##  [28] 1.5 1.4 1.6 1.6 1.5 1.5 1.4 1.5 1.2 1.3 1.4 1.3 1.5 1.3 1.3 1.3 1.6 1.9 1.4 1.6 1.4 1.5 1.4 4.7 4.5 4.9 4.0
##  [55] 4.6 4.5 4.7 3.3 4.6 3.9 3.5 4.2 4.0 4.7 3.6 4.4 4.5 4.1 4.5 3.9 4.8 4.0 4.9 4.7 4.3 4.4 4.8 5.0 4.5 3.5 3.8
##  [82] 3.7 3.9 5.1 4.5 4.5 4.7 4.4 4.1 4.0 4.4 4.6 4.0 3.3 4.2 4.2 4.2 4.3 3.0 4.1 6.0 5.1 5.9 5.6 5.8 6.6 4.5 6.3
## [109] 5.8 6.1 5.1 5.3 5.5 5.0 5.1 5.3 5.5 6.7 6.9 5.0 5.7 4.9 6.7 4.9 5.7 6.0 4.8 4.9 5.6 5.8 6.1 6.4 5.6 5.1 5.6
## [136] 6.1 5.6 5.5 4.8 5.4 5.6 5.1 5.1 5.9 5.7 5.2 5.0 5.2 5.4 5.1</code></pre>
<p>The double square bracket looks as if we are asking for something deep within a container. We are not taking a slice but reaching to get at the one thing at the core.</p>
<ul>
<li>Interact with <code>$</code></li>
</ul>
<p>The accessor that provides the least unique utility is also probably used the most often used. <code>$</code> is a special case of <code>[[</code> in which we access a single item by actual name. The following are equivalent:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="data-processing-with-tidyverse.html#cb149-1" tabindex="-1"></a>iris<span class="sc">$</span>Petal.Length</span></code></pre></div>
<pre><code>##   [1] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 1.5 1.6 1.4 1.1 1.2 1.5 1.3 1.4 1.7 1.5 1.7 1.5 1.0 1.7 1.9 1.6 1.6
##  [28] 1.5 1.4 1.6 1.6 1.5 1.5 1.4 1.5 1.2 1.3 1.4 1.3 1.5 1.3 1.3 1.3 1.6 1.9 1.4 1.6 1.4 1.5 1.4 4.7 4.5 4.9 4.0
##  [55] 4.6 4.5 4.7 3.3 4.6 3.9 3.5 4.2 4.0 4.7 3.6 4.4 4.5 4.1 4.5 3.9 4.8 4.0 4.9 4.7 4.3 4.4 4.8 5.0 4.5 3.5 3.8
##  [82] 3.7 3.9 5.1 4.5 4.5 4.7 4.4 4.1 4.0 4.4 4.6 4.0 3.3 4.2 4.2 4.2 4.3 3.0 4.1 6.0 5.1 5.9 5.6 5.8 6.6 4.5 6.3
## [109] 5.8 6.1 5.1 5.3 5.5 5.0 5.1 5.3 5.5 6.7 6.9 5.0 5.7 4.9 6.7 4.9 5.7 6.0 4.8 4.9 5.6 5.8 6.1 6.4 5.6 5.1 5.6
## [136] 6.1 5.6 5.5 4.8 5.4 5.6 5.1 5.1 5.9 5.7 5.2 5.0 5.2 5.4 5.1</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="data-processing-with-tidyverse.html#cb151-1" tabindex="-1"></a>iris[[<span class="st">&quot;Petal.Length&quot;</span>]]</span></code></pre></div>
<pre><code>##   [1] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 1.5 1.6 1.4 1.1 1.2 1.5 1.3 1.4 1.7 1.5 1.7 1.5 1.0 1.7 1.9 1.6 1.6
##  [28] 1.5 1.4 1.6 1.6 1.5 1.5 1.4 1.5 1.2 1.3 1.4 1.3 1.5 1.3 1.3 1.3 1.6 1.9 1.4 1.6 1.4 1.5 1.4 4.7 4.5 4.9 4.0
##  [55] 4.6 4.5 4.7 3.3 4.6 3.9 3.5 4.2 4.0 4.7 3.6 4.4 4.5 4.1 4.5 3.9 4.8 4.0 4.9 4.7 4.3 4.4 4.8 5.0 4.5 3.5 3.8
##  [82] 3.7 3.9 5.1 4.5 4.5 4.7 4.4 4.1 4.0 4.4 4.6 4.0 3.3 4.2 4.2 4.2 4.3 3.0 4.1 6.0 5.1 5.9 5.6 5.8 6.6 4.5 6.3
## [109] 5.8 6.1 5.1 5.3 5.5 5.0 5.1 5.3 5.5 6.7 6.9 5.0 5.7 4.9 6.7 4.9 5.7 6.0 4.8 4.9 5.6 5.8 6.1 6.4 5.6 5.1 5.6
## [136] 6.1 5.6 5.5 4.8 5.4 5.6 5.1 5.1 5.9 5.7 5.2 5.0 5.2 5.4 5.1</code></pre>
</div>
<div id="subsetting-data-in-base-r" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Subsetting Data in Base R<a href="data-processing-with-tidyverse.html#subsetting-data-in-base-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Selecting/Dropping Columns</strong></p>
<p>Subsetting a data set by selecting or dropping a subset of variables (columns) from a data set is straightforward.</p>
<p>For example, we can define a subset of the <code>iris</code> data set by selecting all numerical variables.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="data-processing-with-tidyverse.html#cb153-1" tabindex="-1"></a>iris.names <span class="ot">=</span> <span class="fu">names</span>(iris)</span>
<span id="cb153-2"><a href="data-processing-with-tidyverse.html#cb153-2" tabindex="-1"></a>iris0 <span class="ot">=</span> iris[, iris.names[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]]</span>
<span id="cb153-3"><a href="data-processing-with-tidyverse.html#cb153-3" tabindex="-1"></a>iris0[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">60</span><span class="sc">:</span><span class="dv">63</span>, <span class="dv">110</span><span class="sc">:</span><span class="dv">113</span>),]</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1            5.1         3.5          1.4         0.2
## 2            4.9         3.0          1.4         0.2
## 3            4.7         3.2          1.3         0.2
## 60           5.2         2.7          3.9         1.4
## 61           5.0         2.0          3.5         1.0
## 62           5.9         3.0          4.2         1.5
## 63           6.0         2.2          4.0         1.0
## 110          7.2         3.6          6.1         2.5
## 111          6.5         3.2          5.1         2.0
## 112          6.4         2.7          5.3         1.9
## 113          6.8         3.0          5.5         2.1</code></pre>
<p>We can also create the same data set by dropping variables in the original data set. For example</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="data-processing-with-tidyverse.html#cb155-1" tabindex="-1"></a>iris02 <span class="ot">=</span> iris[, <span class="sc">-</span><span class="dv">5</span>]</span>
<span id="cb155-2"><a href="data-processing-with-tidyverse.html#cb155-2" tabindex="-1"></a>iris02[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">60</span><span class="sc">:</span><span class="dv">63</span>, <span class="dv">110</span><span class="sc">:</span><span class="dv">113</span>),]</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1            5.1         3.5          1.4         0.2
## 2            4.9         3.0          1.4         0.2
## 3            4.7         3.2          1.3         0.2
## 60           5.2         2.7          3.9         1.4
## 61           5.0         2.0          3.5         1.0
## 62           5.9         3.0          4.2         1.5
## 63           6.0         2.2          4.0         1.0
## 110          7.2         3.6          6.1         2.5
## 111          6.5         3.2          5.1         2.0
## 112          6.4         2.7          5.3         1.9
## 113          6.8         3.0          5.5         2.1</code></pre>
<p><strong>Selection/Dropping Rows</strong></p>
<p>This is also relatively straightforward. The basic idea is to identify row IDs to select or drop the corresponding rows. The R function <code>which()</code> can this trick!</p>
<p>The following example illustrates the way of using <code>which()</code> to subsetting data.</p>
<ol style="list-style-type: decimal">
<li>Selecting One Species of Iris Flowers</li>
</ol>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="data-processing-with-tidyverse.html#cb157-1" tabindex="-1"></a>setosa.id <span class="ot">=</span> <span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>)</span>
<span id="cb157-2"><a href="data-processing-with-tidyverse.html#cb157-2" tabindex="-1"></a>setosa.flower <span class="ot">=</span> iris[setosa.id,]</span>
<span id="cb157-3"><a href="data-processing-with-tidyverse.html#cb157-3" tabindex="-1"></a>setosa.flower[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Selecting Two Species of Iris Flowers</li>
</ol>
<p>The following three code chunks create the same data set.</p>
<p>Method 1:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data-processing-with-tidyverse.html#cb159-1" tabindex="-1"></a>not.setosa.id01 <span class="ot">=</span> <span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">!=</span> <span class="st">&quot;setosa&quot;</span>)</span>
<span id="cb159-2"><a href="data-processing-with-tidyverse.html#cb159-2" tabindex="-1"></a>not.setosa.flower01 <span class="ot">=</span> iris[not.setosa.id01,]</span>
<span id="cb159-3"><a href="data-processing-with-tidyverse.html#cb159-3" tabindex="-1"></a>not.setosa.flower01[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 54          5.5         2.3          4.0         1.3 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor
## 57          6.3         3.3          4.7         1.6 versicolor
## 58          4.9         2.4          3.3         1.0 versicolor
## 59          6.6         2.9          4.6         1.3 versicolor
## 60          5.2         2.7          3.9         1.4 versicolor</code></pre>
<p>Method 2:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="data-processing-with-tidyverse.html#cb161-1" tabindex="-1"></a>not.setosa.id02 <span class="ot">=</span> <span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span> <span class="sc">|</span> iris<span class="sc">$</span>Species <span class="sc">==</span><span class="st">&quot;versicolor&quot;</span>)</span>
<span id="cb161-2"><a href="data-processing-with-tidyverse.html#cb161-2" tabindex="-1"></a>not.setosa.flower02 <span class="ot">=</span> iris[not.setosa.id02,]</span>
<span id="cb161-3"><a href="data-processing-with-tidyverse.html#cb161-3" tabindex="-1"></a>not.setosa.flower02[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 54          5.5         2.3          4.0         1.3 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor
## 57          6.3         3.3          4.7         1.6 versicolor
## 58          4.9         2.4          3.3         1.0 versicolor
## 59          6.6         2.9          4.6         1.3 versicolor
## 60          5.2         2.7          3.9         1.4 versicolor</code></pre>
<p>Method 3:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data-processing-with-tidyverse.html#cb163-1" tabindex="-1"></a>not.setosa.id03 <span class="ot">=</span> <span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;versicolor&quot;</span>, <span class="st">&quot;virginica&quot;</span>))</span>
<span id="cb163-2"><a href="data-processing-with-tidyverse.html#cb163-2" tabindex="-1"></a>not.setosa.flower03 <span class="ot">=</span> iris[not.setosa.id01,]</span>
<span id="cb163-3"><a href="data-processing-with-tidyverse.html#cb163-3" tabindex="-1"></a>not.setosa.flower03[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 54          5.5         2.3          4.0         1.3 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor
## 57          6.3         3.3          4.7         1.6 versicolor
## 58          4.9         2.4          3.3         1.0 versicolor
## 59          6.6         2.9          4.6         1.3 versicolor
## 60          5.2         2.7          3.9         1.4 versicolor</code></pre>
</div>
<div id="subsetting-data-with-dplyr" class="section level3 hasAnchor" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> Subsetting Data with <code>dplyr</code><a href="data-processing-with-tidyverse.html#subsetting-data-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>dplyr</strong> provides helper tools for the most common data manipulation tasks. It is built to work directly with data frames and has the ability to work directly with data stored in an external database. We can conduct queries on the database directly and pull back into R only what we need for analysis.</p>
<p>Since selecting/dropping variables is straightforward (particularly when using %&gt;%). Next, we provide a few examples showing how to use <code>filter()</code> to select/drop rows with certain conditions.</p>
<ul>
<li>Filtering by one criterion</li>
</ul>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data-processing-with-tidyverse.html#cb165-1" tabindex="-1"></a><span class="fu">filter</span>(iris, Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
## 11          5.4         3.7          1.5         0.2  setosa
## 12          4.8         3.4          1.6         0.2  setosa
## 13          4.8         3.0          1.4         0.1  setosa
## 14          4.3         3.0          1.1         0.1  setosa
## 15          5.8         4.0          1.2         0.2  setosa
## 16          5.7         4.4          1.5         0.4  setosa
## 17          5.4         3.9          1.3         0.4  setosa
## 18          5.1         3.5          1.4         0.3  setosa
## 19          5.7         3.8          1.7         0.3  setosa
## 20          5.1         3.8          1.5         0.3  setosa
## 21          5.4         3.4          1.7         0.2  setosa
## 22          5.1         3.7          1.5         0.4  setosa
## 23          4.6         3.6          1.0         0.2  setosa
## 24          5.1         3.3          1.7         0.5  setosa
## 25          4.8         3.4          1.9         0.2  setosa
## 26          5.0         3.0          1.6         0.2  setosa
## 27          5.0         3.4          1.6         0.4  setosa
## 28          5.2         3.5          1.5         0.2  setosa
## 29          5.2         3.4          1.4         0.2  setosa
## 30          4.7         3.2          1.6         0.2  setosa
## 31          4.8         3.1          1.6         0.2  setosa
## 32          5.4         3.4          1.5         0.4  setosa
## 33          5.2         4.1          1.5         0.1  setosa
## 34          5.5         4.2          1.4         0.2  setosa
## 35          4.9         3.1          1.5         0.2  setosa
## 36          5.0         3.2          1.2         0.2  setosa
## 37          5.5         3.5          1.3         0.2  setosa
## 38          4.9         3.6          1.4         0.1  setosa
## 39          4.4         3.0          1.3         0.2  setosa
## 40          5.1         3.4          1.5         0.2  setosa
## 41          5.0         3.5          1.3         0.3  setosa
## 42          4.5         2.3          1.3         0.3  setosa
## 43          4.4         3.2          1.3         0.2  setosa
## 44          5.0         3.5          1.6         0.6  setosa
## 45          5.1         3.8          1.9         0.4  setosa
## 46          4.8         3.0          1.4         0.3  setosa
## 47          5.1         3.8          1.6         0.2  setosa
## 48          4.6         3.2          1.4         0.2  setosa
## 49          5.3         3.7          1.5         0.2  setosa
## 50          5.0         3.3          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="data-processing-with-tidyverse.html#cb167-1" tabindex="-1"></a><span class="fu">filter</span>(iris, Sepal.Length <span class="sc">&gt;</span> <span class="dv">6</span>)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1           7.0         3.2          4.7         1.4 versicolor
## 2           6.4         3.2          4.5         1.5 versicolor
## 3           6.9         3.1          4.9         1.5 versicolor
## 4           6.5         2.8          4.6         1.5 versicolor
## 5           6.3         3.3          4.7         1.6 versicolor
## 6           6.6         2.9          4.6         1.3 versicolor
## 7           6.1         2.9          4.7         1.4 versicolor
## 8           6.7         3.1          4.4         1.4 versicolor
## 9           6.2         2.2          4.5         1.5 versicolor
## 10          6.1         2.8          4.0         1.3 versicolor
## 11          6.3         2.5          4.9         1.5 versicolor
## 12          6.1         2.8          4.7         1.2 versicolor
## 13          6.4         2.9          4.3         1.3 versicolor
## 14          6.6         3.0          4.4         1.4 versicolor
## 15          6.8         2.8          4.8         1.4 versicolor
## 16          6.7         3.0          5.0         1.7 versicolor
## 17          6.7         3.1          4.7         1.5 versicolor
## 18          6.3         2.3          4.4         1.3 versicolor
## 19          6.1         3.0          4.6         1.4 versicolor
## 20          6.2         2.9          4.3         1.3 versicolor
## 21          6.3         3.3          6.0         2.5  virginica
## 22          7.1         3.0          5.9         2.1  virginica
## 23          6.3         2.9          5.6         1.8  virginica
## 24          6.5         3.0          5.8         2.2  virginica
## 25          7.6         3.0          6.6         2.1  virginica
## 26          7.3         2.9          6.3         1.8  virginica
## 27          6.7         2.5          5.8         1.8  virginica
## 28          7.2         3.6          6.1         2.5  virginica
## 29          6.5         3.2          5.1         2.0  virginica
## 30          6.4         2.7          5.3         1.9  virginica
## 31          6.8         3.0          5.5         2.1  virginica
## 32          6.4         3.2          5.3         2.3  virginica
## 33          6.5         3.0          5.5         1.8  virginica
## 34          7.7         3.8          6.7         2.2  virginica
## 35          7.7         2.6          6.9         2.3  virginica
## 36          6.9         3.2          5.7         2.3  virginica
## 37          7.7         2.8          6.7         2.0  virginica
## 38          6.3         2.7          4.9         1.8  virginica
## 39          6.7         3.3          5.7         2.1  virginica
## 40          7.2         3.2          6.0         1.8  virginica
## 41          6.2         2.8          4.8         1.8  virginica
## 42          6.1         3.0          4.9         1.8  virginica
## 43          6.4         2.8          5.6         2.1  virginica
## 44          7.2         3.0          5.8         1.6  virginica
## 45          7.4         2.8          6.1         1.9  virginica
## 46          7.9         3.8          6.4         2.0  virginica
## 47          6.4         2.8          5.6         2.2  virginica
## 48          6.3         2.8          5.1         1.5  virginica
## 49          6.1         2.6          5.6         1.4  virginica
## 50          7.7         3.0          6.1         2.3  virginica
## 51          6.3         3.4          5.6         2.4  virginica
## 52          6.4         3.1          5.5         1.8  virginica
## 53          6.9         3.1          5.4         2.1  virginica
## 54          6.7         3.1          5.6         2.4  virginica
## 55          6.9         3.1          5.1         2.3  virginica
## 56          6.8         3.2          5.9         2.3  virginica
## 57          6.7         3.3          5.7         2.5  virginica
## 58          6.7         3.0          5.2         2.3  virginica
## 59          6.3         2.5          5.0         1.9  virginica
## 60          6.5         3.0          5.2         2.0  virginica
## 61          6.2         3.4          5.4         2.3  virginica</code></pre>
<ul>
<li>When multiple expressions are used, they are combined using <code>&amp;</code> (logical AND) or <code>|</code> (logical OR)</li>
</ul>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="data-processing-with-tidyverse.html#cb169-1" tabindex="-1"></a><span class="fu">filter</span>(iris, Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span> <span class="sc">&amp;</span> Sepal.Length <span class="sc">&gt;</span> <span class="dv">5</span> )</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           5.4         3.9          1.7         0.4  setosa
## 3           5.4         3.7          1.5         0.2  setosa
## 4           5.8         4.0          1.2         0.2  setosa
## 5           5.7         4.4          1.5         0.4  setosa
## 6           5.4         3.9          1.3         0.4  setosa
## 7           5.1         3.5          1.4         0.3  setosa
## 8           5.7         3.8          1.7         0.3  setosa
## 9           5.1         3.8          1.5         0.3  setosa
## 10          5.4         3.4          1.7         0.2  setosa
## 11          5.1         3.7          1.5         0.4  setosa
## 12          5.1         3.3          1.7         0.5  setosa
## 13          5.2         3.5          1.5         0.2  setosa
## 14          5.2         3.4          1.4         0.2  setosa
## 15          5.4         3.4          1.5         0.4  setosa
## 16          5.2         4.1          1.5         0.1  setosa
## 17          5.5         4.2          1.4         0.2  setosa
## 18          5.5         3.5          1.3         0.2  setosa
## 19          5.1         3.4          1.5         0.2  setosa
## 20          5.1         3.8          1.9         0.4  setosa
## 21          5.1         3.8          1.6         0.2  setosa
## 22          5.3         3.7          1.5         0.2  setosa</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="data-processing-with-tidyverse.html#cb171-1" tabindex="-1"></a><span class="fu">filter</span>(iris, Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span> <span class="sc">|</span> Sepal.Length <span class="sc">&gt;</span> <span class="dv">7</span> )</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 1           5.1         3.5          1.4         0.2    setosa
## 2           4.9         3.0          1.4         0.2    setosa
## 3           4.7         3.2          1.3         0.2    setosa
## 4           4.6         3.1          1.5         0.2    setosa
## 5           5.0         3.6          1.4         0.2    setosa
## 6           5.4         3.9          1.7         0.4    setosa
## 7           4.6         3.4          1.4         0.3    setosa
## 8           5.0         3.4          1.5         0.2    setosa
## 9           4.4         2.9          1.4         0.2    setosa
## 10          4.9         3.1          1.5         0.1    setosa
## 11          5.4         3.7          1.5         0.2    setosa
## 12          4.8         3.4          1.6         0.2    setosa
## 13          4.8         3.0          1.4         0.1    setosa
## 14          4.3         3.0          1.1         0.1    setosa
## 15          5.8         4.0          1.2         0.2    setosa
## 16          5.7         4.4          1.5         0.4    setosa
## 17          5.4         3.9          1.3         0.4    setosa
## 18          5.1         3.5          1.4         0.3    setosa
## 19          5.7         3.8          1.7         0.3    setosa
## 20          5.1         3.8          1.5         0.3    setosa
## 21          5.4         3.4          1.7         0.2    setosa
## 22          5.1         3.7          1.5         0.4    setosa
## 23          4.6         3.6          1.0         0.2    setosa
## 24          5.1         3.3          1.7         0.5    setosa
## 25          4.8         3.4          1.9         0.2    setosa
## 26          5.0         3.0          1.6         0.2    setosa
## 27          5.0         3.4          1.6         0.4    setosa
## 28          5.2         3.5          1.5         0.2    setosa
## 29          5.2         3.4          1.4         0.2    setosa
## 30          4.7         3.2          1.6         0.2    setosa
## 31          4.8         3.1          1.6         0.2    setosa
## 32          5.4         3.4          1.5         0.4    setosa
## 33          5.2         4.1          1.5         0.1    setosa
## 34          5.5         4.2          1.4         0.2    setosa
## 35          4.9         3.1          1.5         0.2    setosa
## 36          5.0         3.2          1.2         0.2    setosa
## 37          5.5         3.5          1.3         0.2    setosa
## 38          4.9         3.6          1.4         0.1    setosa
## 39          4.4         3.0          1.3         0.2    setosa
## 40          5.1         3.4          1.5         0.2    setosa
## 41          5.0         3.5          1.3         0.3    setosa
## 42          4.5         2.3          1.3         0.3    setosa
## 43          4.4         3.2          1.3         0.2    setosa
## 44          5.0         3.5          1.6         0.6    setosa
## 45          5.1         3.8          1.9         0.4    setosa
## 46          4.8         3.0          1.4         0.3    setosa
## 47          5.1         3.8          1.6         0.2    setosa
## 48          4.6         3.2          1.4         0.2    setosa
## 49          5.3         3.7          1.5         0.2    setosa
## 50          5.0         3.3          1.4         0.2    setosa
## 51          7.1         3.0          5.9         2.1 virginica
## 52          7.6         3.0          6.6         2.1 virginica
## 53          7.3         2.9          6.3         1.8 virginica
## 54          7.2         3.6          6.1         2.5 virginica
## 55          7.7         3.8          6.7         2.2 virginica
## 56          7.7         2.6          6.9         2.3 virginica
## 57          7.7         2.8          6.7         2.0 virginica
## 58          7.2         3.2          6.0         1.8 virginica
## 59          7.2         3.0          5.8         1.6 virginica
## 60          7.4         2.8          6.1         1.9 virginica
## 61          7.9         3.8          6.4         2.0 virginica
## 62          7.7         3.0          6.1         2.3 virginica</code></pre>
<ul>
<li>To refer to column names that are stored as strings, use the <code>.data</code> pronoun:</li>
</ul>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="data-processing-with-tidyverse.html#cb173-1" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>, <span class="st">&quot;Petal.Length&quot;</span>)</span>
<span id="cb173-2"><a href="data-processing-with-tidyverse.html#cb173-2" tabindex="-1"></a>cond <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">5</span>)</span>
<span id="cb173-3"><a href="data-processing-with-tidyverse.html#cb173-3" tabindex="-1"></a>subset.iris <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb173-4"><a href="data-processing-with-tidyverse.html#cb173-4" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb173-5"><a href="data-processing-with-tidyverse.html#cb173-5" tabindex="-1"></a>    .data[[vars[[<span class="dv">1</span>]]]] <span class="sc">&gt;</span> cond[[<span class="dv">1</span>]],</span>
<span id="cb173-6"><a href="data-processing-with-tidyverse.html#cb173-6" tabindex="-1"></a>    .data[[vars[[<span class="dv">2</span>]]]] <span class="sc">&lt;</span> cond[[<span class="dv">2</span>]]</span>
<span id="cb173-7"><a href="data-processing-with-tidyverse.html#cb173-7" tabindex="-1"></a>  )</span>
<span id="cb173-8"><a href="data-processing-with-tidyverse.html#cb173-8" tabindex="-1"></a><span class="fu">head</span>(subset.iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1          7.0         3.2          4.7         1.4 versicolor
## 2          6.4         3.2          4.5         1.5 versicolor
## 3          6.9         3.1          4.9         1.5 versicolor
## 4          6.5         2.8          4.6         1.5 versicolor
## 5          6.3         3.3          4.7         1.6 versicolor
## 6          6.6         2.9          4.6         1.3 versicolor</code></pre>
</div>
<div id="variable-definition-and-variable-type-conversion" class="section level3 hasAnchor" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> Variable Definition and Variable Type Conversion<a href="data-processing-with-tidyverse.html#variable-definition-and-variable-type-conversion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Define New Variables</li>
</ul>
<p>Defining new variables based on the existing variables is straightforward in R using the basic arithmetic and mathematical operations. When using <code>%&gt;%</code>, <code>dplyr()</code> is used to define new variables.</p>
<ul>
<li>Variable Type Conversion</li>
</ul>
<p>Type conversions in R work as you would expect. For example, adding a character string to a numeric vector converts all the elements in the vector to the character.</p>
<ol style="list-style-type: decimal">
<li>Use <code>is.foo</code> to test for data type foo. Returns TRUE or FALSE</li>
</ol>
<p><code>is.numeric(), is.character(), is.vector(), is.matrix(), is.data.frame()</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Use <code>as.foo</code> to explicitly convert it.</li>
</ol>
<p><code>as.numeric(), as.character(), as.vector(), as.matrix(), as.data.frame)</code></p>
</div>
</div>
<div id="importingexporting-data" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Importing/Exporting Data<a href="data-processing-with-tidyverse.html#importingexporting-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="importing-dara" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Importing Dara<a href="data-processing-with-tidyverse.html#importing-dara" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are different functions in various R libraries to read data to R.</p>
<ul>
<li>Base R and Libraries Come with Base R</li>
</ul>
<p>R loading functions in {utils}: <code>read.table()</code>, <code>read.csv()</code>, <code>read.csv2()</code>, <code>read.delim()</code>, and <code>read.delim2()</code></p>
<ul>
<li>Functions in {tidyverse}</li>
</ul>
<p>As a part of {tidyverse}, the library {readr} has several functions to read the data in common formats.</p>
<p><code>read_table(), read_delim(), read_csv(), read_csv2(), read_tsv()</code></p>
<ul>
<li>Read data set generated by other programs such as SAS, SPSS, etc.</li>
</ul>
<p>Several libraries are useful to load special formats of data to R. Three important libraries are</p>
<p><code>{xlsx, Hmisc, foreign}</code>.</p>
<div id="exporting-data" class="section level3 hasAnchor" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Exporting Data<a href="data-processing-with-tidyverse.html#exporting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have learned how to use <code>dplyr</code> to extract information from or summarize your raw data, we may want to export these new data sets to share them with other people or for archival.</p>
<p>Similar to the <code>read_csv()</code> function used for reading CSV files into R, there is a <code>write_csv()</code> function that generates CSV files from data frames.</p>
<p>Lets assume our data set under the name, <code>final_data</code>, is ready, we can save it as a CSV file in our <code>data</code> folder using the following code.</p>
<p><code>write_csv(final_data, file = "data/final_data.csv")</code></p>
</div>
</div>
<div id="overview-of-tidyverse-optional" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> <strong>Overview of <code>Tidyverse</code> (Optional)</strong><a href="data-processing-with-tidyverse.html#overview-of-tidyverse-optional" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are several R libraries that have powerful tools for data wrangling and information extraction. Tidyverse is a collection of essential R packages for data science. There 8 packages under the <code>tidyverse umbrella</code> that help us in performing and interacting with the data.</p>
<div id="packages-for-data-wrangling-and-transformation" class="section level3 hasAnchor" number="8.6.1">
<h3><span class="header-section-number">8.6.1</span> Packages for Data Wrangling and Transformation<a href="data-processing-with-tidyverse.html#packages-for-data-wrangling-and-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>dplyr</strong> provides helper tools for the most common data manipulation tasks. It is built to work directly with data frames and has the ability to work directly with data stored in an external database. We can conduct queries on the database directly, and pull back into R only what we need for analysis.</p></li>
<li><p><strong>tidyr</strong> addresses the common problem of wanting to reshape the data with a sophisticated layout for plotting and usage by different R functions.</p></li>
<li><p><strong>stringr</strong> deals with string variables. It plays a big role in processing raw data into a cleaner and easily understandable format.</p></li>
<li><p><strong>forcats</strong> is dedicated to dealing with categorical variables or factors. Anyone who has worked with categorical data knows what a nightmare they can be.</p></li>
</ul>
</div>
<div id="packages-for-data-import-and-management" class="section level3 hasAnchor" number="8.6.2">
<h3><span class="header-section-number">8.6.2</span> Packages for Data Import and Management<a href="data-processing-with-tidyverse.html#packages-for-data-import-and-management" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>tibble</strong> is a new modern data frame with nicer behavior around printing, subsetting, and factor handling. It keeps many important features of the original data frame and removes many of the outdated features.</p></li>
<li><p><strong>readr</strong> package is recently developed to deal with reading in large flat files quickly. The package provides replacements for functions like <code>read.table()</code> and <code>read.csv().</code> The analogous functions in {readr} are <code>read_table()</code> and <code>read_csv()</code>.</p></li>
</ul>
</div>
<div id="functional-programming-with-library-purrr" class="section level3 hasAnchor" number="8.6.3">
<h3><span class="header-section-number">8.6.3</span> Functional Programming with Library <strong>{purrr}</strong><a href="data-processing-with-tidyverse.html#functional-programming-with-library-purrr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><strong>purrr</strong> is a new package that fills in the missing pieces in Rs functional programming tools. This is not a coding class. We will not use purrr in this class.</li>
</ul>
</div>
<div id="data-visualization-and-exploration" class="section level3 hasAnchor" number="8.6.4">
<h3><span class="header-section-number">8.6.4</span> Data Visualization and Exploration<a href="data-processing-with-tidyverse.html#data-visualization-and-exploration" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>ggplot2</strong> is a powerful and flexible R package for producing elegant graphics. The concept behind <code>ggplot2</code> divides plot into three different fundamental parts: <code>Plot = data + Aesthetics + Geometry</code>.</p>
<p>The principal components of every plot can be defined as follow:</p>
<ul>
<li><p><strong>Aesthetics</strong> is used to indicate x and y variables. It can also be used to control the color, the size or the shape of points, the height of bars, etc.</p></li>
<li><p><strong>Geometry</strong> defines the type of graphics (histogram, box plot, line plot, density plot, dot plot, etc.)</p></li>
</ul>
<p>This will be one of the primary tools for this class.</p>
</div>
</div>
<div id="data-management-with-dplyr-optional" class="section level2 hasAnchor" number="8.7">
<h2><span class="header-section-number">8.7</span> Data Management with <code>dplyr</code> (Optional)<a href="data-processing-with-tidyverse.html#data-management-with-dplyr-optional" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What we can do in the standard SQL can also be done with <code>dyplr</code>. For the convenience of illustration, we use a simple well-known built-in <code>iris data set</code>.</p>
<div id="common-dplyr-functions" class="section level3 hasAnchor" number="8.7.1">
<h3><span class="header-section-number">8.7.1</span> Common <code>dplyr</code> Functions<a href="data-processing-with-tidyverse.html#common-dplyr-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following is the list of functions in <code>dplyr</code>.</p>
<ul>
<li><strong>select()</strong>: sub-setting columns.</li>
</ul>
<p>To select columns of a data frame, use <code>select()</code>. The first argument to this function is the data frame (<code>iris</code>), and the subsequent arguments are the columns to keep. For example</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="data-processing-with-tidyverse.html#cb175-1" tabindex="-1"></a>iris.petal <span class="ot">=</span> <span class="fu">select</span>(iris, Petal.Length, Petal.Width, Species)</span>
<span id="cb175-2"><a href="data-processing-with-tidyverse.html#cb175-2" tabindex="-1"></a><span class="fu">str</span>(iris.petal)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  3 variables:
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>To select all columns except certain ones, put a - in front of the variable to exclude it. For example, we <strong>exclude</strong> Petal information and only <strong>keep</strong> Sepal information, we can use the following code</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="data-processing-with-tidyverse.html#cb177-1" tabindex="-1"></a>iris.sepal <span class="ot">=</span> <span class="fu">select</span>(iris, <span class="sc">-</span>Petal.Length, <span class="sc">-</span>Petal.Width)</span>
<span id="cb177-2"><a href="data-processing-with-tidyverse.html#cb177-2" tabindex="-1"></a><span class="fu">str</span>(iris.sepal)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  3 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>This will select all the variables in surveys except for <code>Petal.Length</code>, and <code>Petal.Width</code>.</p>
<ul>
<li><strong>filter()</strong>: sub-setting rows on conditions.</li>
</ul>
<p>For example, if we only select one species <code>Versicolor</code>, we can use the following code.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data-processing-with-tidyverse.html#cb179-1" tabindex="-1"></a>versicolor <span class="ot">=</span> <span class="fu">filter</span>(iris, Species <span class="sc">==</span><span class="st">&quot;versicolor&quot;</span>)</span>
<span id="cb179-2"><a href="data-processing-with-tidyverse.html#cb179-2" tabindex="-1"></a><span class="fu">summary</span>(versicolor)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length   Petal.Width          Species  
##  Min.   :4.900   Min.   :2.000   Min.   :3.00   Min.   :1.000   setosa    : 0  
##  1st Qu.:5.600   1st Qu.:2.525   1st Qu.:4.00   1st Qu.:1.200   versicolor:50  
##  Median :5.900   Median :2.800   Median :4.35   Median :1.300   virginica : 0  
##  Mean   :5.936   Mean   :2.770   Mean   :4.26   Mean   :1.326                  
##  3rd Qu.:6.300   3rd Qu.:3.000   3rd Qu.:4.60   3rd Qu.:1.500                  
##  Max.   :7.000   Max.   :3.400   Max.   :5.10   Max.   :1.800</code></pre>
<p>If we subset a data set by selecting a certain number of columns and row with multiple conditions, pipe operator <code>%&gt;%</code> will make subsetting easy. For example, if we only want to study <code>sepal width</code> and <code>length</code> of <code>setosa</code> where petal length is less than 1.5. The following code using <code>%&gt;%</code></p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="data-processing-with-tidyverse.html#cb181-1" tabindex="-1"></a>resulting.subset <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb181-2"><a href="data-processing-with-tidyverse.html#cb181-2" tabindex="-1"></a>             <span class="fu">filter</span>(Petal.Length <span class="sc">&lt;</span> <span class="fl">1.5</span>, Species <span class="sc">==</span><span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-3"><a href="data-processing-with-tidyverse.html#cb181-3" tabindex="-1"></a>             <span class="fu">select</span>(Sepal.Length, Sepal.Width, Species)</span>
<span id="cb181-4"><a href="data-processing-with-tidyverse.html#cb181-4" tabindex="-1"></a><span class="fu">summary</span>(resulting.subset)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width          Species  
##  Min.   :4.300   Min.   :2.300   setosa    :24  
##  1st Qu.:4.600   1st Qu.:3.000   versicolor: 0  
##  Median :4.900   Median :3.350   virginica : 0  
##  Mean   :4.896   Mean   :3.333                  
##  3rd Qu.:5.100   3rd Qu.:3.525                  
##  Max.   :5.800   Max.   :4.200</code></pre>
<p>Note that, multiple conditional statements are separated by <code>,</code> or <code>&amp;</code>. Using <code>%&gt;%</code>, we dont need to include the data set as the first argument.</p>
<ul>
<li><strong>mutate()</strong>: creating new columns by using information from other columns.</li>
</ul>
<p>Frequently we want to create new columns based on the values in existing columns. For example, we want to define two ratios of the sepal and petal widths and sepal and petal lengths. For this, well use mutate().</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data-processing-with-tidyverse.html#cb183-1" tabindex="-1"></a>expanded.data <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb183-2"><a href="data-processing-with-tidyverse.html#cb183-2" tabindex="-1"></a>             <span class="fu">mutate</span>(<span class="at">length.ratio =</span> Sepal.Length<span class="sc">/</span>Petal.Length,</span>
<span id="cb183-3"><a href="data-processing-with-tidyverse.html#cb183-3" tabindex="-1"></a>                    <span class="at">width.ratio =</span> Sepal.Width<span class="sc">/</span>Petal.Width)</span>
<span id="cb183-4"><a href="data-processing-with-tidyverse.html#cb183-4" tabindex="-1"></a><span class="fu">summary</span>(expanded.data)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species    length.ratio    width.ratio    
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100   setosa    :50   Min.   :1.050   Min.   : 1.130  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300   versicolor:50   1st Qu.:1.230   1st Qu.: 1.603  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300   virginica :50   Median :1.411   Median : 2.148  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199                   Mean   :2.018   Mean   : 6.628  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800                   3rd Qu.:3.176   3rd Qu.:11.583  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500                   Max.   :4.833   Max.   :41.000</code></pre>
<ul>
<li><strong>group_by()</strong> and <strong>summarize()</strong>: creating summary statistics on grouped data.</li>
</ul>
<p>group_by() is often used together with summarize(), which collapses each group into a single-row summary of that group. group_by() takes as arguments the column names that contain the categorical variables for which you want to calculate the summary statistics.</p>
<p>The following code yields a set of summarized statistics including the mean of sepal width and length as well as the correlation coefficients in each of the three species.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data-processing-with-tidyverse.html#cb185-1" tabindex="-1"></a>summary.stats <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb185-2"><a href="data-processing-with-tidyverse.html#cb185-2" tabindex="-1"></a>             <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb185-3"><a href="data-processing-with-tidyverse.html#cb185-3" tabindex="-1"></a>             <span class="fu">summarize</span>(<span class="at">sepal.width.avg =</span> <span class="fu">mean</span>(Sepal.Width),</span>
<span id="cb185-4"><a href="data-processing-with-tidyverse.html#cb185-4" tabindex="-1"></a>                       <span class="at">sepal.length.avg =</span> <span class="fu">mean</span>(Sepal.Length),</span>
<span id="cb185-5"><a href="data-processing-with-tidyverse.html#cb185-5" tabindex="-1"></a>                       <span class="at">corr.sepal =</span> <span class="fu">cor</span>(Sepal.Length, Sepal.Width)) </span>
<span id="cb185-6"><a href="data-processing-with-tidyverse.html#cb185-6" tabindex="-1"></a>summary.stats</span></code></pre></div>
<pre><code>## # A tibble: 3  4
##   Species    sepal.width.avg sepal.length.avg corr.sepal
##   &lt;fct&gt;                &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;
## 1 setosa                3.43             5.01      0.743
## 2 versicolor            2.77             5.94      0.526
## 3 virginica             2.97             6.59      0.457</code></pre>
<p>All R functions such as <code>min()</code>, <code>max()</code>, , that yield summarized statistics can be used with <code>summarize()</code>. We can also filter out some observations before we compute the summary statistics.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data-processing-with-tidyverse.html#cb187-1" tabindex="-1"></a>summary.stats.filtering <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb187-2"><a href="data-processing-with-tidyverse.html#cb187-2" tabindex="-1"></a>             <span class="fu">filter</span>(Petal.Length <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb187-3"><a href="data-processing-with-tidyverse.html#cb187-3" tabindex="-1"></a>             <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb187-4"><a href="data-processing-with-tidyverse.html#cb187-4" tabindex="-1"></a>             <span class="fu">summarize</span>(<span class="at">sepal.width.avg =</span> <span class="fu">mean</span>(Sepal.Width),</span>
<span id="cb187-5"><a href="data-processing-with-tidyverse.html#cb187-5" tabindex="-1"></a>                       <span class="at">sepal.length.avg =</span> <span class="fu">mean</span>(Sepal.Length),</span>
<span id="cb187-6"><a href="data-processing-with-tidyverse.html#cb187-6" tabindex="-1"></a>                       <span class="at">corr.sepal =</span> <span class="fu">cor</span>(Sepal.Length, Sepal.Width)) </span>
<span id="cb187-7"><a href="data-processing-with-tidyverse.html#cb187-7" tabindex="-1"></a>summary.stats.filtering</span></code></pre></div>
<pre><code>## # A tibble: 3  4
##   Species    sepal.width.avg sepal.length.avg corr.sepal
##   &lt;fct&gt;                &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;
## 1 setosa                3.43             5.01      0.743
## 2 versicolor            2.77             5.92      0.519
## 3 virginica             2.8              5.85      0.643</code></pre>
<ul>
<li><strong>arrange()</strong>: sorting results.</li>
</ul>
<p>To sort in descending order, we need to add the <code>desc()</code> function. If we want to sort the results by decreasing the order of mean weight.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data-processing-with-tidyverse.html#cb189-1" tabindex="-1"></a>summary.stats.sort <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb189-2"><a href="data-processing-with-tidyverse.html#cb189-2" tabindex="-1"></a>             <span class="fu">filter</span>(Petal.Length <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb189-3"><a href="data-processing-with-tidyverse.html#cb189-3" tabindex="-1"></a>             <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb189-4"><a href="data-processing-with-tidyverse.html#cb189-4" tabindex="-1"></a>             <span class="fu">summarize</span>(<span class="at">sepal.width.avg =</span> <span class="fu">mean</span>(Sepal.Width),</span>
<span id="cb189-5"><a href="data-processing-with-tidyverse.html#cb189-5" tabindex="-1"></a>                       <span class="at">sepal.length.avg =</span> <span class="fu">mean</span>(Sepal.Length),</span>
<span id="cb189-6"><a href="data-processing-with-tidyverse.html#cb189-6" tabindex="-1"></a>                       <span class="at">corr.sepal =</span> <span class="fu">cor</span>(Sepal.Length, Sepal.Width)) <span class="sc">%&gt;%</span></span>
<span id="cb189-7"><a href="data-processing-with-tidyverse.html#cb189-7" tabindex="-1"></a>              <span class="fu">arrange</span>(<span class="fu">desc</span>(corr.sepal))</span>
<span id="cb189-8"><a href="data-processing-with-tidyverse.html#cb189-8" tabindex="-1"></a>summary.stats.sort</span></code></pre></div>
<pre><code>## # A tibble: 3  4
##   Species    sepal.width.avg sepal.length.avg corr.sepal
##   &lt;fct&gt;                &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;
## 1 setosa                3.43             5.01      0.743
## 2 virginica             2.8              5.85      0.643
## 3 versicolor            2.77             5.92      0.519</code></pre>
<p>The resulting data set can also be sorted by multiple variables.</p>
<ul>
<li><strong>count()</strong>: counting discrete values.</li>
</ul>
<p>When working with data, we often want to know the number of observations found for each factor or combination of factors. For this task, <code>dplyr</code> provides <code>count()</code>. For example, if we wanted to count the number of rows of data for each species after we filter out all records with Petal Length &lt; 5, we would do:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="data-processing-with-tidyverse.html#cb191-1" tabindex="-1"></a>summary.count <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb191-2"><a href="data-processing-with-tidyverse.html#cb191-2" tabindex="-1"></a>             <span class="fu">filter</span>(Petal.Length <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb191-3"><a href="data-processing-with-tidyverse.html#cb191-3" tabindex="-1"></a>             <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb191-4"><a href="data-processing-with-tidyverse.html#cb191-4" tabindex="-1"></a>             <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">sort =</span> <span class="cn">TRUE</span>) </span>
<span id="cb191-5"><a href="data-processing-with-tidyverse.html#cb191-5" tabindex="-1"></a>summary.count</span></code></pre></div>
<pre><code>## # A tibble: 3  3
##   Species    count sort 
##   &lt;fct&gt;      &lt;int&gt; &lt;lgl&gt;
## 1 setosa        50 TRUE 
## 2 versicolor    48 TRUE 
## 3 virginica      6 TRUE</code></pre>
<p>If we wanted to count a combination of factors, say <code>factor A</code> and <code>factor B</code>, we would specify the first and the second factor as the arguments of <code>count(factor A, factor B)</code>.</p>
</div>
<div id="reshaping-functions-in-tidyr" class="section level3 hasAnchor" number="8.7.2">
<h3><span class="header-section-number">8.7.2</span> Reshaping Functions in <code>tidyr</code><a href="data-processing-with-tidyverse.html#reshaping-functions-in-tidyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>tidyr</code> package complements <code>dplyr</code> perfectly. It boosts the power of dplyr for data manipulation and pre-processing. To illustrate how to use these functions, we consider defining a subset from <code>iris</code> that contains only two variables: Sepal Length and Species.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="data-processing-with-tidyverse.html#cb193-1" tabindex="-1"></a>life.expectancy <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/pengdsci/sta553.html/main/life_expectancy_years.csv&quot;</span>)</span>
<span id="cb193-2"><a href="data-processing-with-tidyverse.html#cb193-2" tabindex="-1"></a>life.expectancy[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##                country X1799 X1800 X1801 X1802 X1803 X1804 X1805 X1806 X1807
## 1          Afghanistan  28.2  28.2  28.2  28.2  28.2  28.2  28.1  28.1  28.1
## 2               Angola  27.0  27.0  27.0  27.0  27.0  27.0  27.0  27.0  27.0
## 3              Albania  35.4  35.4  35.4  35.4  35.4  35.4  35.4  35.4  35.4
## 4              Andorra    NA    NA    NA    NA    NA    NA    NA    NA    NA
## 5 United Arab Emirates  30.7  30.7  30.7  30.7  30.7  30.7  30.7  30.7  30.7</code></pre>
<p><code>sub.iris</code> is called a <strong>long table</strong>. We can reshape this <strong>long table</strong> to a <strong>wide table</strong> using <code>spread()</code> function.</p>
<ul>
<li><p><strong>gather()</strong>: The function gathers multiple columns from the data set and converts them into key-value pairs. <code>gather()</code> takes four principal arguments:</p>
<ul>
<li>data set</li>
<li>the key column variable we wish to create from column names.</li>
<li>the values column variable we wish to create and fill with values associated with the key.</li>
</ul></li>
</ul>
<p><code>The names of the columns we use to fill the key variable (or to drop)</code>.</p>
<p>Here we exclude <code>country</code> from being <code>gather()</code>ed.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="data-processing-with-tidyverse.html#cb195-1" tabindex="-1"></a>life.expectancy.long <span class="ot">&lt;-</span> life.expectancy <span class="sc">%&gt;%</span></span>
<span id="cb195-2"><a href="data-processing-with-tidyverse.html#cb195-2" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;Year&quot;</span>,       <span class="co"># the column names of the wide table</span></span>
<span id="cb195-3"><a href="data-processing-with-tidyverse.html#cb195-3" tabindex="-1"></a>         <span class="at">value =</span> <span class="st">&quot;lifeExp&quot;</span>,  <span class="co"># the numerical values of the table</span></span>
<span id="cb195-4"><a href="data-processing-with-tidyverse.html#cb195-4" tabindex="-1"></a>         <span class="sc">-</span> country,          <span class="co"># drop country variable: its value will not be gathered (stacked)!</span></span>
<span id="cb195-5"><a href="data-processing-with-tidyverse.html#cb195-5" tabindex="-1"></a>         <span class="at">na.rm =</span> <span class="cn">TRUE</span>)       <span class="co"># removing records with missing values</span></span>
<span id="cb195-6"><a href="data-processing-with-tidyverse.html#cb195-6" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb195-7"><a href="data-processing-with-tidyverse.html#cb195-7" tabindex="-1"></a><span class="fu">head</span>(life.expectancy.long)</span></code></pre></div>
<pre><code>##                country  Year lifeExp
## 1          Afghanistan X1799    28.2
## 2               Angola X1799    27.0
## 3              Albania X1799    35.4
## 5 United Arab Emirates X1799    30.7
## 6            Argentina X1799    33.2
## 7              Armenia X1799    34.0</code></pre>
<p>We can use <code>substr()</code> to remove <code>X</code> from the variable <code>Year</code> as shown in the following code.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="data-processing-with-tidyverse.html#cb197-1" tabindex="-1"></a>correct.life.exp.data <span class="ot">&lt;-</span> life.expectancy.long <span class="sc">%&gt;%</span></span>
<span id="cb197-2"><a href="data-processing-with-tidyverse.html#cb197-2" tabindex="-1"></a>                      <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">substr</span>(Year,<span class="dv">2</span>,<span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb197-3"><a href="data-processing-with-tidyverse.html#cb197-3" tabindex="-1"></a>                      <span class="fu">select</span>(<span class="sc">-</span>Year)</span>
<span id="cb197-4"><a href="data-processing-with-tidyverse.html#cb197-4" tabindex="-1"></a><span class="fu">head</span>(correct.life.exp.data)</span></code></pre></div>
<pre><code>##                country lifeExp year
## 1          Afghanistan    28.2 1799
## 2               Angola    27.0 1799
## 3              Albania    35.4 1799
## 5 United Arab Emirates    30.7 1799
## 6            Argentina    33.2 1799
## 7              Armenia    34.0 1799</code></pre>
<p>For illustrative purposes, we look at a small subset of the iris data set.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="data-processing-with-tidyverse.html#cb199-1" tabindex="-1"></a> mini.iris <span class="ot">&lt;-</span> iris[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">51</span>, <span class="dv">101</span>), ]</span>
<span id="cb199-2"><a href="data-processing-with-tidyverse.html#cb199-2" tabindex="-1"></a> mini.iris</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 101          6.3         3.3          6.0         2.5  virginica</code></pre>
<p>We list (<code>select</code>) the columns to be stacked explicitly as arguments of <code>gather()</code> in the following code.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="data-processing-with-tidyverse.html#cb201-1" tabindex="-1"></a>mini.iris.w2l <span class="ot">&lt;-</span> mini.iris <span class="sc">%&gt;%</span></span>
<span id="cb201-2"><a href="data-processing-with-tidyverse.html#cb201-2" tabindex="-1"></a>          <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;flower.att&quot;</span>, <span class="at">value =</span> <span class="st">&quot;measurement&quot;</span>,</span>
<span id="cb201-3"><a href="data-processing-with-tidyverse.html#cb201-3" tabindex="-1"></a>           Sepal.Length, Sepal.Width, Petal.Length, Petal.Width)</span>
<span id="cb201-4"><a href="data-processing-with-tidyverse.html#cb201-4" tabindex="-1"></a>mini.iris.w2l</span></code></pre></div>
<pre><code>##       Species   flower.att measurement
## 1      setosa Sepal.Length         5.1
## 2  versicolor Sepal.Length         7.0
## 3   virginica Sepal.Length         6.3
## 4      setosa  Sepal.Width         3.5
## 5  versicolor  Sepal.Width         3.2
## 6   virginica  Sepal.Width         3.3
## 7      setosa Petal.Length         1.4
## 8  versicolor Petal.Length         4.7
## 9   virginica Petal.Length         6.0
## 10     setosa  Petal.Width         0.2
## 11 versicolor  Petal.Width         1.4
## 12  virginica  Petal.Width         2.5</code></pre>
<p>We can also use <code>"-"</code> operator to exclude the column(s) to be <code>gather()ed</code> to make the code cleaner.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="data-processing-with-tidyverse.html#cb203-1" tabindex="-1"></a>mini.iris.w2l0 <span class="ot">&lt;-</span> mini.iris <span class="sc">%&gt;%</span></span>
<span id="cb203-2"><a href="data-processing-with-tidyverse.html#cb203-2" tabindex="-1"></a>          <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;flower.att&quot;</span>, <span class="at">value =</span> <span class="st">&quot;measurement&quot;</span>, <span class="sc">-</span>Species)</span>
<span id="cb203-3"><a href="data-processing-with-tidyverse.html#cb203-3" tabindex="-1"></a>mini.iris.w2l0</span></code></pre></div>
<pre><code>##       Species   flower.att measurement
## 1      setosa Sepal.Length         5.1
## 2  versicolor Sepal.Length         7.0
## 3   virginica Sepal.Length         6.3
## 4      setosa  Sepal.Width         3.5
## 5  versicolor  Sepal.Width         3.2
## 6   virginica  Sepal.Width         3.3
## 7      setosa Petal.Length         1.4
## 8  versicolor Petal.Length         4.7
## 9   virginica Petal.Length         6.0
## 10     setosa  Petal.Width         0.2
## 11 versicolor  Petal.Width         1.4
## 12  virginica  Petal.Width         2.5</code></pre>
<ul>
<li><p><strong>spread()</strong>: takes two columns and spreads them into multiple columns. It takes three principal arguments:</p>
<ul>
<li>the data</li>
<li>the key column <code>(categorical)</code> variable whose values will become new column names.</li>
<li>the value column <code>(numerical or categorical)</code> variable whose values will fill the new column variables.</li>
</ul></li>
</ul>
<p>Further arguments include filling which, if set, fills in missing values with the value provided.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="data-processing-with-tidyverse.html#cb205-1" tabindex="-1"></a>mini.iris.l2w <span class="ot">&lt;-</span> mini.iris.w2l <span class="sc">%&gt;%</span></span>
<span id="cb205-2"><a href="data-processing-with-tidyverse.html#cb205-2" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> <span class="st">&quot;flower.att&quot;</span>, <span class="at">value =</span> <span class="st">&quot;measurement&quot;</span>)</span>
<span id="cb205-3"><a href="data-processing-with-tidyverse.html#cb205-3" tabindex="-1"></a><span class="fu">head</span>(mini.iris.l2w)</span></code></pre></div>
<pre><code>##      Species Petal.Length Petal.Width Sepal.Length Sepal.Width
## 1     setosa          1.4         0.2          5.1         3.5
## 2 versicolor          4.7         1.4          7.0         3.2
## 3  virginica          6.0         2.5          6.3         3.3</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ethics-in-data-visualization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-ggplot.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pengdsci/STA553EB/edit/master/07-IntroTidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["STA553EB.pdf", "STA553EB.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
